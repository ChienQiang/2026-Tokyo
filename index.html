<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±äº¬ç´€è¡Œ 2025</title>
    
    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700;900&family=Noto+Serif+JP:wght@300;400;600;700&family=Zen+Old+Mincho:wght@400;600;700;900&family=Shippori+Mincho:wght@400;600;800&family=Yomogi&family=Rye&family=Courier+Prime&family=Michroma&family=Potta+One&family=Dela+Gothic+One&family=Share+Tech+Mono&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Shippori+Mincho+B1:wght@700&family=New+Tegomin&family=Reggae+One&family=Kaisei+Decol:wght@400;700&display=swap" rel="stylesheet">

    <!-- 3. Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

    <!-- 4. Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- 5. React & Babel -->
    <script async src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"></script>
    <script type="importmap">
      {
        "imports": {
          "react": "https://esm.sh/react@18.2.0",
          "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
          "lucide-react": "https://esm.sh/lucide-react@0.292.0?deps=react@18.2.0"
        }
      }
    </script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <style>
        :root {
            --accent-color: #111111;
            --floating-bg: #fdfbf7;
            --floating-border: rgba(15, 23, 42, 0.12);
            --floating-menu-bg: #f5f5f5;
            --floating-menu-bg-active: #eaeaeb;
            --floating-panel-bg: #fafafa;
            --floating-panel-bg-active: #f1f1f3;
            --floating-panel-border: rgba(31, 41, 55, 0.15);
        }

        /* åŸºç¤é¢¨æ ¼ */
        body { 
            font-family: 'Shippori Mincho', 'Noto Serif JP', serif; 
            background-color: #f9f8f6;
            color: #2c2c2c;
            background-image: radial-gradient(#e5e5e5 1px, transparent 1px);
            background-size: 24px 24px;
        }
        h1, h2, h3, .font-display { font-family: 'Zen Old Mincho', serif; }

        /* --- STYLES (Color & Contrast Tuning) --- */

        /* ğŸ¬ ä»Šæ• (Kon) */
        .style-kon {
            font-family: 'Noto Sans JP', sans-serif !important;
            background-color: #050505 !important; 
            color: #f8fafc !important;
            border: 1px solid #333;
        }
        .style-kon h3 { font-weight: 900; letter-spacing: 0.1em; text-shadow: 2px 0 #ff0000, -2px 0 #0000ff; color: #fff !important; }
        .style-kon p, .style-kon span, .style-kon div { color: #e2e8f0 !important; }
        .style-kon .kon-border::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
            background: linear-gradient(90deg, #ff0000 0%, #0000ff 50%, #ff0000 100%);
            animation: kon-glitch 2s infinite linear;
        }
        @keyframes kon-glitch { 0% { background-position: 0% 0%; } 100% { background-position: 100% 0%; } }

        /* ğŸŸ¡ è‰é–“å½Œç”Ÿ (Kusama) */
        .style-kusama {
            background-color: #fbbf24 !important;
            background-image: radial-gradient(black 30%, transparent 31%), radial-gradient(black 30%, transparent 31%) !important;
            background-size: 20px 20px !important; background-position: 0 0, 10px 10px !important;
            color: black !important; font-family: 'Noto Sans JP', sans-serif; font-weight: 900;
            border: 4px solid black !important; border-radius: 0 !important;
        }
        .style-kusama .inner-card { background: white; border: 2px solid black; padding: 15px; box-shadow: 5px 5px 0 black; color: black !important; }
        /* æ¨™é¡Œå¼·åˆ¶åº•è‰²ï¼Œç¢ºä¿é»‘è‰²é»é»èƒŒæ™¯ä¸‹å¯è®€ */
        .style-kusama h3 { 
            background: black; color: #fbbf24 !important; padding: 5px 10px; display: inline-block; 
            box-shadow: 4px 4px 0 #fff;
        }
        .style-kusama p { color: #000 !important; font-weight: 700; }

        /* ğŸƒ å‰åœåŠ› (Ghibli) */
        .style-ghibli {
            background-color: #f0fdf4 !important; color: #14532d !important;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.1'/%3E%3C/svg%3E") !important;
            font-family: 'Zen Old Mincho', serif; border: none !important; border-radius: 24px !important;
            box-shadow: 0 10px 30px -10px rgba(22, 101, 52, 0.3) !important;
        }
        .style-ghibli h3 { font-family: 'Yomogi', cursive; color: #14532d !important; }
        .style-ghibli p { color: #166534 !important; font-weight: 600; }

        /* ğŸ® ç¥éš±å°‘å¥³ (Spirited Away) */
        .style-spirited {
            background-color: #881337 !important; /* Rose 900 */
            color: #fef3c7 !important; /* Amber 100 */
            font-family: 'Zen Old Mincho', serif !important;
            border: 6px double #fbbf24 !important; /* Amber 400 */
            background-image: 
                radial-gradient(#9f1239 15%, transparent 16%), 
                radial-gradient(#9f1239 15%, transparent 16%) !important;
            background-size: 20px 20px !important;
            background-position: 0 0, 10px 10px !important;
            box-shadow: 0 15px 40px rgba(136, 19, 55, 0.6) !important;
            border-radius: 12px !important;
        }
        .style-spirited h3 { 
            text-shadow: 0 2px 4px rgba(0,0,0,0.8); 
            border-bottom: 2px solid #fbbf24; 
            padding-bottom: 15px; 
            margin-bottom: 20px;
            color: #fffbeb !important;
            font-weight: 900;
            letter-spacing: 0.1em;
        }
        .style-spirited p, .style-spirited span, .style-spirited div { color: #fde68a !important; text-shadow: 0 1px 2px rgba(0,0,0,0.5); font-weight: 500; }

        /* ğŸ“° æ±äº¬æ—¥æ—¥ (Retro) */
        .style-retro {
            background-color: #f5f5dc !important; color: #171717 !important; font-family: 'Shippori Mincho', serif;
            border: 1px solid #444 !important; box-shadow: 10px 10px 0 rgba(0,0,0,0.1) !important; border-radius: 2px !important;
        }
        .style-retro h3 { border-bottom: 3px double #262626; padding-bottom: 5px; margin-bottom: 15px; font-weight: 900; color: #000 !important; }
        .style-retro p { color: #1c1917 !important; font-weight: 600; }

        /* ğŸ‘§ å¥ˆè‰¯ç¾æ™º (Nara) */
        .style-nara {
            background-color: #fffbeb !important; color: #57534e !important; font-family: 'Yomogi', cursive !important;
            border: 2px dashed #d6d3d1 !important; border-radius: 30px !important; padding: 20px !important;
        }
        .style-nara h3 { color: #0ea5e9 !important; font-size: 2rem; }
        .style-nara p { color: #44403c !important; font-size: 1.05em; font-weight: 600; }

        /* ğŸ´â€â˜ ï¸ èˆªæµ·ç‹ (One Piece) */
        .style-onepiece {
            background-color: #f3e5ab !important; color: #291d12 !important; font-family: 'Rye', serif !important;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d4c596' fill-opacity='0.4'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z'/%3E%3C/g%3E%3C/svg%3E") !important;
            border: 8px double #4a3b2a !important; border-radius: 4px !important;
        }
        .style-onepiece h3 { 
            font-size: 2.5rem; text-transform: uppercase; text-align: center; border-bottom: 2px solid #4a3b2a; margin-bottom: 20px; color: #291d12 !important;
        }
        .style-onepiece p { color: #3f2e18 !important; font-weight: 800; }

        /* âš”ï¸ Style 7: éŠ€é­‚ (Gintama) */
        .style-gintama {
            background-color: #fff !important; color: #0f172a !important; font-family: 'Potta One', cursive !important;
            background-image: repeating-linear-gradient(45deg, #e0f2fe 25%, transparent 25%, transparent 75%, #e0f2fe 75%, #e0f2fe), repeating-linear-gradient(45deg, #e0f2fe 25%, #fff 25%, #fff 75%, #e0f2fe 75%, #e0f2fe) !important;
            background-size: 20px 20px !important; border: 4px solid #000 !important;
        }
        .style-gintama h3 { font-size: 2rem; transform: rotate(-2deg); background: white; border: 2px solid black; padding: 5px; box-shadow: 4px 4px 0 #0ea5e9; color: #000 !important; }
        .style-gintama p { background: rgba(255,255,255,0.9); padding: 8px; color: #000 !important; font-weight: 700; border: 1px solid #e5e5e5; }

        /* ğŸ§ª Style 8: GAIAC 10 (Le Labo) */
        .style-gaiac {
            background-color: #e5e5e5 !important; color: #111 !important; font-family: 'Courier Prime', monospace !important;
            border: 1px solid #111 !important; border-radius: 0 !important; padding: 40px !important; box-shadow: none !important;
        }
        .style-gaiac h3 { text-transform: uppercase; font-weight: 400; letter-spacing: 2px; font-size: 1.5rem; border-bottom: 1px solid #111; padding-bottom: 10px; margin-bottom: 20px; color: #000 !important;}
        .style-gaiac p { color: #111 !important; font-weight: 600; }

        /* ğŸ“ Style 9: ä¸‰å®…ä¸€ç”Ÿ (Miyake) */
        .style-miyake {
            background: #fff !important; color: #000 !important; font-family: 'Michroma', sans-serif !important;
            border: none !important; box-shadow: 0 20px 50px rgba(0,0,0,0.1) !important;
            background-image: linear-gradient(90deg, transparent 50%, rgba(0,0,0,0.05) 50%) !important; background-size: 10px 100% !important;
        }
        .style-miyake h3 { font-weight: 400; letter-spacing: 0.2em; text-transform: uppercase; color: #000 !important; }
        .style-miyake p { color: #333 !important; font-weight: 500; }

        /* ğŸ’¿ Style 10: æ±äº¬å¨åŠ›ç§‘å‰µ (TEL) */
        .style-tel {
            background-color: #001f3f !important; color: #ffffff !important; font-family: 'Share Tech Mono', monospace !important;
            border: 1px solid #00aaff !important; box-shadow: 0 0 15px rgba(0, 170, 255, 0.4) !important;
            background-image: linear-gradient(0deg, transparent 24%, rgba(0, 170, 255, .3) 25%, rgba(0, 170, 255, .3) 26%, transparent 27%, transparent 74%, rgba(0, 170, 255, .3) 75%, rgba(0, 170, 255, .3) 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, rgba(0, 170, 255, .3) 25%, rgba(0, 170, 255, .3) 26%, transparent 27%, transparent 74%, rgba(0, 170, 255, .3) 75%, rgba(0, 170, 255, .3) 76%, transparent 77%, transparent) !important;
            background-size: 50px 50px !important;
        }
        .style-tel h3 { text-shadow: 0 0 5px #00aaff; letter-spacing: 2px; color: #00aaff !important; }
        .style-tel p { color: #e0f2fe !important; font-weight: 400; text-shadow: 0 0 2px #000; }

        /* ğŸ“– Style 11: çŸ³é»‘ä¸€é›„ (Ishiguro) */
        .style-ishiguro {
            background-color: #f3f0e9 !important; color: #2d2a24 !important; font-family: 'Cormorant Garamond', serif !important;
            border: 1px solid #d4cbb8 !important; padding: 40px !important;
        }
        .style-ishiguro h3 { font-style: italic; font-weight: 600; font-size: 2.2rem; border-bottom: 1px solid #d4cbb8; margin-bottom: 20px; padding-bottom: 10px; color: #1c1917 !important; }
        .style-ishiguro p { font-size: 1.1em; line-height: 1.8; color: #44403c !important; font-weight: 600; }

        /* ğŸŒˆ Style 12: åŸå®¿ (Harajuku) */
        .style-harajuku {
            background-color: #ffccff !important; color: #330066 !important; font-family: 'Dela Gothic One', cursive !important;
            border: 6px dashed #00ffff !important; border-radius: 20px !important;
            box-shadow: 8px 8px 0 #ff00cc !important;
        }
        .style-harajuku h3 { text-shadow: 2px 2px 0 #fff; transform: rotate(-3deg); background: #ffff00; padding: 5px; display: inline-block; color: #ff0066 !important; }
        .style-harajuku p { font-weight: bold; color: #3300cc !important; background: rgba(255,255,255,0.5); padding: 5px; }

        /* ğŸŒ² Style 13: å¤§æ±Ÿå»ºä¸‰éƒ (Oe) */
        .style-oe {
            background-color: #2c3328 !important; color: #e2e8d8 !important; font-family: 'Shippori Mincho B1', serif !important;
            border-left: 10px solid #5f6b55 !important; border-radius: 0 !important;
        }
        .style-oe h3 { font-weight: 900; letter-spacing: 0.1em; border-bottom: 1px solid #5f6b55; padding-bottom: 15px; margin-bottom: 20px; color: #ffffff !important; }
        .style-oe p { color: #f0fdf4 !important; font-weight: 500; }

        /* ğŸ“ Style 14: æ±äº¬å¤§å­¸ (Todai) */
        .style-todai {
            background-color: #fffbeb !important; color: #1a1a1a !important; 
            font-family: 'Zen Old Mincho', serif !important;
            border: 4px solid #7f1d1d !important; box-shadow: 10px 10px 0 #eab308 !important; border-radius: 4px !important;
        }
        .style-todai h3 { font-weight: 900; border-bottom: 2px solid #7f1d1d; padding-bottom: 10px; margin-bottom: 20px; color: #7f1d1d !important; }
        .style-todai p { color: #450a0a !important; font-weight: 600; }

        /* ğŸ¦… Style 15: é«˜å¸‚æ—©è‹— (Sanae) */
        .style-sanae {
            background-color: #1e3a8a !important; color: #ffffff !important; 
            font-family: 'Noto Sans JP', sans-serif !important;
            border: 2px solid #fcd34d !important; border-radius: 0 !important;
            background-image: linear-gradient(45deg, #172554 25%, transparent 25%, transparent 75%, #172554 75%, #172554), linear-gradient(45deg, #172554 25%, transparent 25%, transparent 75%, #172554 75%, #172554) !important;
            background-size: 20px 20px !important; background-position: 0 0, 10px 10px !important;
        }
        .style-sanae h3 { font-weight: 900; text-transform: uppercase; letter-spacing: 0.2em; color: #fcd34d !important; border-bottom: 4px solid #fcd34d; }
        .style-sanae p, .style-sanae span, .style-sanae div { color: #fefce8 !important; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }

        /* ğŸŒ‰ Style 16: å‹é¬¨æ©‹ (Kachidoki) */
        .style-kachidoki {
            background-color: #334155 !important; color: #e2e8f0 !important;
            font-family: 'Share Tech Mono', monospace !important;
            border: 4px dashed #94a3b8 !important; border-radius: 10px !important;
            box-shadow: inset 0 0 20px #0f172a !important;
        }
        .style-kachidoki h3 { text-shadow: 0 0 10px #38bdf8; color: #38bdf8 !important; font-weight: 400; }
        .style-kachidoki p { color: #cbd5e1 !important; }

        /* ğŸ¢ Style 17: ä½å‹å•†äº‹ (Sumitomo) */
        .style-sumitomo {
            background-color: #064e3b !important; color: #ffffff !important;
            font-family: 'Noto Serif JP', serif !important;
            border: 3px solid #f59e0b !important; border-radius: 2px !important;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3) !important;
        }
        .style-sumitomo h3 { font-weight: 700; border-bottom: 1px solid #f59e0b; padding-bottom: 15px; margin-bottom: 20px; color: #f59e0b !important; letter-spacing: 0.1em; }
        .style-sumitomo p { color: #ecfdf5 !important; font-weight: 400; }

        /* ğŸ•µï¸ Style 18: æ±é‡åœ­å¾ (Higashino) */
        .style-higashino {
            background-color: #171717 !important; color: #d4d4d4 !important;
            font-family: 'Shippori Mincho', serif !important;
            border-left: 1px solid #404040; padding: 30px !important;
        }
        .style-higashino h3 { color: #ffffff !important; font-weight: 700; letter-spacing: 0.15em; border-bottom: 1px solid #a3a3a3; padding-bottom: 10px; }
        .style-higashino p { color: #e5e5e5 !important; font-size: 0.95em; line-height: 2; font-weight: 500; }

        /* ğŸ§Ÿ Style 19: æ±äº¬å–°ç¨® (Tokyo Ghoul) */
        .style-ghoul {
            background-color: #000000 !important; color: #ff0000 !important;
            font-family: 'Reggae One', cursive !important;
            border: 3px solid #ff0000 !important;
            background-image: radial-gradient(circle at 50% 50%, rgba(255, 0, 0, 0.1) 0%, transparent 60%), repeating-linear-gradient(45deg, rgba(20, 0, 0, 0.5) 0px, rgba(20, 0, 0, 0.5) 2px, transparent 2px, transparent 4px);
        }
        .style-ghoul h3 { font-size: 2.5rem; color: #ffffff !important; text-shadow: 2px 2px 0 #ff0000, -1px -1px 0 #550000; transform: skew(-5deg); }
        .style-ghoul p { color: #fca5a5 !important; font-family: 'Noto Sans JP', sans-serif; font-weight: 700; text-shadow: 1px 1px 0 #000; }
        .style-ghoul .kon-border::before { background: linear-gradient(90deg, #ff0000 0%, #ffffff 50%, #ff0000 100%); }

        /* âœï¸ Style 20: æ¾æœ¬å¤§æ´‹ (Matsumoto) - æ±äº¬æ—¥æ—¥ */
        .style-matsumoto {
            background-color: #f2f2f2 !important; /* Paper white */
            background-image: url("data:image/svg+xml,%3Csvg width='4' height='4' viewBox='0 0 4 4' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 3h1v1H1V3zm2-2h1v1H3V1z' fill='%23d4d4d4' fill-opacity='0.4'/%3E%3C/svg%3E") !important;
            color: #111 !important;
            font-family: 'Kaisei Decol', serif !important;
            border: 3px solid #222 !important;
            border-radius: 4px 12px 4px 12px !important;
            box-shadow: 8px 8px 0 rgba(0,0,0,0.1) !important; /* ä¿®æ­£ï¼šé™°å½±æ·¡åŒ– */
        }
        .style-matsumoto h3 { font-weight: 700; border-bottom: 2px dashed #444; padding-bottom: 10px; margin-bottom: 20px; color: #000 !important; }
        .style-matsumoto p { font-size: 1.05em; color: #1f2937 !important; font-weight: 600; }

        /* ğŸ—¼ Style 21: æ±äº¬éƒ½åŒæƒ…å¡” (Sympathy Tower) */
        .style-sympathy {
            background-color: #e2e8f0 !important;
            background-image: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 50%, #94a3b8 100%) !important;
            color: #0f172a !important;
            font-family: 'Michroma', sans-serif !important;
            border: 1px solid #fff !important;
            border-radius: 40px 0 40px 0 !important;
            box-shadow: 0 10px 40px -10px rgba(71, 85, 105, 0.5) !important;
        }
        .style-sympathy h3 { color: #1e293b !important; text-transform: uppercase; letter-spacing: 0.1em; }
        .style-sympathy p { color: #334155 !important; font-family: 'Noto Sans JP', sans-serif; font-weight: 600; }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-in { animation: fadeIn 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards; }
        .leaflet-container { font-family: 'Shippori Mincho', serif; z-index: 0; background: #f6f5f3; filter: contrast(0.95) sepia(0.05); }
        .custom-div-icon { background: transparent; border: none; }
        .map-label { background: rgba(255, 255, 255, 0.95); border: 1px solid #d1d5db; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); font-family: 'Zen Old Mincho', serif; font-weight: 700; font-size: 13px; color: #374151; padding: 4px 8px; border-radius: 2px; }
        .leaflet-tooltip-left:before, .leaflet-tooltip-right:before, .leaflet-tooltip-bottom:before, .leaflet-tooltip-top:before { border: none !important; }
        ruby { font-family: 'Zen Old Mincho', serif; }
        rt { font-family: 'Shippori Mincho', serif; font-size: 0.55em; opacity: 0.7; letter-spacing: 0.05em; color: inherit; }

        /* !IMPORTANT: å¼·åˆ¶ä¿®æ­£ Vocabulary å€å¡Šæ˜“è®€æ€§ */
        .vocab-card { background-color: #ffffff !important; border: 1px solid #e5e7eb !important; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05) !important; }
        .vocab-card h4 { color: #94a3b8 !important; }
        .vocab-card .vocab-term { color: #1f2937 !important; text-shadow: none !important; }
        .vocab-card .vocab-reading { color: #6b7280 !important; text-shadow: none !important; }
        .vocab-card .vocab-desc { color: #4b5563 !important; text-shadow: none !important; }
        .vocab-card .vocab-badge { background-color: #f9fafb !important; color: #6b7280 !important; border-color: #e5e7eb !important; text-shadow: none !important; }

        /* --- Floating FAB --- */
        .floating-menu {
            position: fixed;
            right: 1.5rem;
            bottom: 2rem;
            z-index: 9999;
            font-family: 'Shippori Mincho', 'Noto Sans JP', serif;
            background: var(--floating-bg);
            border-radius: 999px;
            border: 1px solid var(--floating-border);
            padding: 0.25rem;
            backdrop-filter: blur(14px);
            box-shadow: 0 12px 30px rgba(15, 23, 42, 0.18);
        }

        .floating-fab-button {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: 1px solid #dcdada;
            cursor: pointer;
            background: #fdfbf7;
            color: #292524;
            box-shadow: 0 10px 28px rgba(41, 37, 36, 0.18);
            display: flex;
            align-items: center;
            justify-content: center;
            transition:
                transform 0.18s ease,
                box-shadow 0.18s ease,
                background 0.3s ease,
                border-color 0.3s ease;
        }

        .floating-fab-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 14px 28px rgba(41, 37, 36, 0.25);
            background: #f5f1e9;
        }

        .floating-fab-button.is-open {
            background: #e4e7ec;
            color: #1f2937;
            border-color: #cfd3da;
            box-shadow: 0 18px 36px rgba(15, 23, 42, 0.25);
        }

        .fab-icon {
            display: inline-flex;
            flex-direction: column;
            gap: 3px;
            align-items: center;
        }

        .fab-icon span {
            width: 24px;
            height: 2px;
            border-radius: 1px;
            background: #4b5563;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, opacity 0.3s ease, background 0.3s ease;
        }

        .floating-fab-button.is-open .fab-icon span:nth-child(1) {
            transform: translateY(6px) rotate(45deg);
            background: #1f2937;
        }

        .floating-fab-button.is-open .fab-icon span:nth-child(2) {
            opacity: 0;
        }

        .floating-fab-button.is-open .fab-icon span:nth-child(3) {
            transform: translateY(-6px) rotate(-45deg);
            background: #1f2937;
        }

        /* --- ä¸»é¸å–®é¢æ¿ --- */
        .floating-menu-panel {
            position: absolute;
            right: 0;
            bottom: 64px;
            display: flex;
            flex-direction: column;
            gap: 0.9rem;
            padding: 1.1rem 1.25rem;
            background: var(--floating-menu-bg);
            border-radius: 18px;
            border: 1px solid var(--floating-border);
            box-shadow: 0 14px 34px rgba(15, 23, 42, 0.16);
            font-family: 'Shippori Mincho', 'Noto Sans JP', serif;
            opacity: 0;
            pointer-events: none;
            transform: translateY(12px);
            transition: opacity 0.18s ease, transform 0.18s ease, background 0.3s ease, border-color 0.3s ease;
            min-width: 270px;
            max-width: 360px;
        }

        .floating-menu-panel.is-open {
            opacity: 1;
            pointer-events: auto;
            transform: translateY(0);
            background: var(--floating-menu-bg-active);
            border-color: rgba(31, 41, 55, 0.25);
        }

        .floating-menu-item {
            display: flex;
            align-items: center;
            gap: 0.65rem;
            border: none;
            background: transparent;
            color: #1f1f1f;
            font-size: 16px;
            padding: 0.65rem 0.8rem;
            border-radius: 999px;
            cursor: pointer;
            text-align: left;
            white-space: nowrap;
            font-family: 'Noto Sans JP', 'Shippori Mincho', serif;
        }

        .floating-menu-item span.icon {
            font-size: 18px;
            width: 20px;
            text-align: center;
        }

        .floating-menu-item span.label {
            font-family: 'Noto Sans JP', 'Shippori Mincho', serif;
            flex: 1;
        }

        .floating-menu-item:hover {
            background: rgba(149, 129, 88, 0.08);
        }

        /* --- æµ®å‡ºå°é¢æ¿å…±ç”¨æ¨£å¼ï¼ˆç·Šæ€¥è³‡è¨Š / ç†Šçš„æƒ…å ±ï¼‰ --- */
        .floating-panel {
            position: fixed;
            right: 1.5rem;
            bottom: 80px;
            width: 320px;
            max-width: calc(100vw - 2rem);
            background: var(--floating-panel-bg);
            color: #1f1f1f;
            border-radius: 18px;
            border: 1px solid var(--floating-panel-border);
            box-shadow: 0 15px 35px rgba(15, 23, 42, 0.2);
            padding: 1rem 1rem 1.1rem;
            font-size: 14px;
            display: none;
            z-index: 9998;
            max-height: 80vh;
            overflow: hidden;
            font-family: 'Shippori Mincho', 'Noto Serif JP', serif;
            flex-direction: column;
            gap: 0.9rem;
            transition: background 0.3s ease, border-color 0.3s ease, transform 0.2s ease;
        }

        .floating-panel.is-open {
            display: flex;
            background: var(--floating-panel-bg-active);
            border-color: rgba(31, 41, 55, 0.2);
        }

        .floating-panel.dark-panel {
            background: var(--floating-bg);
            color: #1f1f1f;
            padding: 0.75rem;
            border-color: var(--floating-border);
        }

        .floating-panel-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-weight: 600;
            font-size: 13px;
        }

        .floating-panel-header-title,
        .floating-panel-title {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .floating-panel-title i {
            color: #fbbf24;
        }

        .floating-panel-hero {
            margin-bottom: 12px;
            border-radius: 10px;
            overflow: hidden;
        }

        .floating-panel-hero img {
            width: 100%;
            display: block;
        }

        .floating-panel-body {
            display: flex;
            flex-direction: column;
            gap: 16px;
            flex: 1;
            max-height: 65vh;
            overflow-y: auto;
            padding-right: 0.35rem;
            padding-left: 0.35rem;
        }

        .checklist-card {
            background: #fff;
            border-radius: 16px;
            padding: 1rem;
            box-shadow: 0 12px 40px rgba(15, 23, 42, 0.18);
            border: 1px solid rgba(15, 23, 42, 0.08);
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .checklist-card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
            font-size: 14px;
            font-weight: 600;
        }

        .checklist-card-header span {
            font-size: 12px;
            color: #6b7280;
        }

        .checklist-section {
            border-top: 1px solid rgba(15, 23, 42, 0.08);
            padding-top: 0.75rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .checklist-section h4 {
            margin: 0;
            font-size: 13px;
            letter-spacing: 0.04em;
            color: #1f2937;
            text-transform: uppercase;
        }

        .checklist-items {
            display: flex;
            flex-direction: column;
            gap: 0.45rem;
        }

        .checklist-items label {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            font-size: 13px;
            color: #111827;
        }

        .checklist-items input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #2952ff;
        }

        .checklist-note {
            font-size: 11px;
            color: #4b5563;
        }

        .fp-section-title {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            font-weight: 600;
            margin: 0;
        }

        .fp-section-title i {
            font-size: 14px;
            color: #93c5fd;
        }

        .fp-list {
            margin: 0;
            padding-left: 1.2em;
            list-style: disc;
        }

        .fp-list li {
            margin-bottom: 4px;
            line-height: 1.5;
        }

        .fp-reading {
            display: block;
            font-size: 11px;
            color: #9ca3af;
            margin-top: 2px;
        }

        .fp-reading-inline {
            font-size: 11px;
            color: #9ca3af;
        }

        .floating-panel-close {
            border: none;
            background: rgba(255, 255, 255, 0.8);
            color: #374151;
            cursor: pointer;
            font-size: 20px;
            font-family: 'Noto Sans JP', 'Shippori Mincho', serif;
            line-height: 1;
            padding: 8px;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 10px rgba(15, 23, 42, 0.2);
        }

        .floating-panel-close:hover {
            background: #f8fafc;
            color: #111827;
        }

        .floating-textarea {
            width: 100%;
            min-height: 90px;
            resize: vertical;
            border-radius: 10px;
            border: 1px solid #e7e5e4;
            background: #fff;
            color: #292524;
            font-size: 13px;
            padding: 0.5rem;
            box-sizing: border-box;
        }

        .floating-textarea::placeholder {
            color: #9ca3af;
        }

        .floating-sos-list {
            list-style: none;
            padding: 0;
            margin: 0.2rem 0 0.3rem;
        }

        .floating-sos-list li {
            margin-bottom: 0.25rem;
            line-height: 1.4;
        }

        .floating-sos-label {
            color: #6b7280;
            margin-right: 0.25rem;
        }

        .floating-sos-note {
            margin-top: 0.25rem;
            color: #6b7280;
            font-size: 11px;
            line-height: 1.5;
        }

        .sos-pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 0.25rem 0 0.5rem;
            font-size: 11px;
            color: #4b5563;
            gap: 0.5rem;
        }

        .sos-page-btn {
            flex: 1;
            border: 1px solid #d1d5db;
            background: #fff;
            color: #374151;
            padding: 4px 6px;
            border-radius: 999px;
            cursor: pointer;
            font-weight: 600;
        }

        .sos-page-btn.is-active {
            background: #0f172a;
            color: #fff;
            border-color: #0f172a;
        }

        .sos-page {
            display: none;
        }

        .sos-page.is-active {
            display: block;
        }

        .bear-note {
            font-size: 12px;
            line-height: 1.55;
            max-height: 240px;
            overflow-y: auto;
            padding: 6px 0;
            white-space: normal;
        }

        .bear-note a {
            color: #4fa3ff;
            text-decoration: underline;
        }

        .bear-note a:hover {
            opacity: 0.7;
        }

        .map-toggle-btn {
            position: absolute;
            left: 12px;
            bottom: 12px;
            padding: 7px 10px;
            border-radius: 999px;
            border: 1px solid #e5e7eb;
            background: rgba(255,255,255,0.92);
            color: #1f2937;
            font-size: 11px;
            font-weight: 700;
            box-shadow: 0 6px 16px rgba(15, 23, 42, 0.12);
            display: inline-flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.2s ease;
        }

        .map-toggle-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 20px rgba(15, 23, 42, 0.16);
            background: #ffffff;
        }

        .hero-title-main {
            color: var(--accent-color);
        }

        /* æ—¥æœŸåˆ— */
        .day-tabs {
            display: flex;
            gap: 10px;
            padding: 10px 0 14px;
            flex-wrap: nowrap;
            font-family: 'Zen Old Mincho', serif;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .day-tabs::-webkit-scrollbar {
            display: none;
        }

        /* æ—¥æœŸæŒ‰éˆ• */
        .day-tab {
            flex: 0 0 auto;
            padding: 9px 16px;
            border-radius: 0;
            font-family: 'Zen Old Mincho', serif;
            font-weight: 700;
            letter-spacing: 0.08em;
            background: #fff;
            border: 1px solid var(--day-color, var(--accent-color));
            color: var(--day-color, var(--accent-color));
            cursor: pointer;
            transition: 0.3s ease;
        }

        .day-tab.is-active {
            background: var(--day-color, var(--accent-color));
            color: #fff;
        }

        .day-panel-container {
            position: relative;
            overflow: hidden;
            min-height: 280px;
        }

        /* åŸºæœ¬ç‹€æ…‹ï¼šå…ˆçœ‹ä¸åˆ°ã€å¾…å‘½ä¸­ */
        .day-panel {
            position: absolute;
            inset: 0;
            opacity: 0;
            transform: translateX(0);
            pointer-events: none;
            transition:
                opacity 0.45s ease,
                transform 0.45s cubic-bezier(.22,.61,.36,1);
        }

        /* é¡¯ç¤ºä¸­çš„é‚£ä¸€å¤© */
        .day-panel.is-active {
            opacity: 1;
            pointer-events: auto;
            position: relative;
        }

        /* é€²å ´èµ·å§‹ä½ç½®ï¼ˆæ–°çš„ä¸€å¤©å¾é€™è£¡é–‹å§‹ï¼‰ */
        .day-panel.slide-in-from-right {
            transform: translateX(24px);
        }

        .day-panel.slide-in-from-left {
            transform: translateX(-24px);
        }

        /* æœ€çµ‚ç‰ˆï¼šå¼·åˆ¶è®“æ—¥æœŸ tab ä½¿ç”¨ä¸»é¡Œè‰² */
        button.day-tab {
            background-color: #fff;
            border: 1px solid var(--accent-color);
            color: var(--accent-color);
        }
        button.day-tab.is-active {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
            color: #fff;
        }

        @media (max-width: 600px) {
            body {
                font-size: 15px;
            }
            .floating-menu {
                right: 1rem;
                bottom: 2rem;
            }
            .floating-panel {
                right: 1rem;
                bottom: 76px;
            }
            .floating-panel,
            .floating-sos-note,
            .bear-note,
            .day-tab {
                font-size: 14px;
            }
            .floating-panel-header-title span {
                font-size: 14px;
            }
        }
    </style>
</head>
<body data-bear-feed="https://jsonplaceholder.typicode.com/posts/1">
    
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef, useMemo } from 'react';
        import { createRoot } from 'react-dom/client';
        import { 
            Plane, Train, Hotel, MapPin, Camera, ShoppingBag, Home, Clock, 
            ArrowRight, Utensils, X, Map as MapIcon, Ticket, List, ExternalLink, 
            Cloud, Sun, CloudSnow, CloudRain, Info, Shirt, Tag, 
            Compass, BookOpen, Zap, Users, ListFilter, AlertTriangle, Lightbulb, Briefcase, TrendingUp, Languages, Gift, Landmark, Moon, Palette, Anchor, Skull
        } from 'lucide-react';

        // --- åœ°åœ–çµ„ä»¶ ---
        const DailyMapView = ({ route, dayIndex }) => {
            const mapRef = useRef(null);
            const mapInstanceRef = useRef(null);
            const [interactive, setInteractive] = useState(false);

            const haversineKm = (a, b) => {
                const toRad = (deg) => (deg * Math.PI) / 180;
                const [lat1, lon1] = a;
                const [lat2, lon2] = b;
                const R = 6371; // km
                const dLat = toRad(lat2 - lat1);
                const dLon = toRad(lon2 - lon1);
                const h =
                    Math.sin(dLat / 2) ** 2 +
                    Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) ** 2;
                return 2 * R * Math.asin(Math.min(1, Math.sqrt(h)));
            };

            const totalDistanceKm = useMemo(() => {
                if (!route?.path || route.path.length < 2) return 0;
                return route.path.slice(1).reduce((sum, coord, idx) => {
                    return sum + haversineKm(route.path[idx], coord);
                }, 0);
            }, [route]);

            const setMapInteractivity = (map, enabled) => {
                if (!map) return;
                const toggle = enabled ? 'enable' : 'disable';
                ['dragging', 'scrollWheelZoom', 'doubleClickZoom', 'boxZoom', 'keyboard', 'touchZoom', 'tap']
                    .forEach((feature) => {
                        if (map[feature] && map[feature][toggle]) {
                            map[feature][toggle]();
                        }
                    });
            };

            useEffect(() => {
                if (!mapRef.current) return;
                if (typeof L === 'undefined') return;

                if (!mapInstanceRef.current) {
                    mapInstanceRef.current = L.map(mapRef.current, {
                        zoomControl: false, attributionControl: false, scrollWheelZoom: false 
                    });
                    L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
                        subdomains: 'abcd', maxZoom: 19
                    }).addTo(mapInstanceRef.current);
                    setMapInteractivity(mapInstanceRef.current, false);
                }

                const map = mapInstanceRef.current;
                map.eachLayer((layer) => {
                    if (layer instanceof L.Polyline || layer instanceof L.Marker || layer instanceof L.CircleMarker) { map.removeLayer(layer); }
                });

                const colors = ['#0f172a', '#44403c', '#064e3b', '#4c1d95', '#0c4a6e'];
                const color = colors[dayIndex % colors.length];

                if (route && route.path.length > 0) {
                    L.polyline(route.path, { color: color, weight: 2.5, opacity: 0.8, dashArray: '6, 8', lineCap: 'square' }).addTo(map);
                    if (route.stops) {
                        route.stops.forEach(stop => {
                            L.circleMarker(stop.coord, { radius: 4, fillColor: '#fff', color: color, weight: 2, fillOpacity: 1 })
                            .bindTooltip(stop.name, { permanent: true, direction: 'bottom', offset: [0, 6], className: 'map-label' })
                            .addTo(map);
                        });
                    }
                    if (route.landmarks) {
                        route.landmarks.forEach((spot) => {
                            const icon = L.divIcon({
                                className: 'custom-div-icon',
                                html: `<div style="font-size:18px;">${spot.emoji}</div>`
                            });
                            L.marker(spot.coord, { icon })
                                .bindTooltip(spot.label, { direction: 'top', offset: [0, -8], className: 'map-label' })
                                .addTo(map);
                        });
                    }
                    const bounds = L.latLngBounds(route.path.concat(route.landmarks?.map(l => l.coord) || []));
                    map.fitBounds(bounds, { padding: [60, 60] });
                }
                setTimeout(() => { map.invalidateSize(); }, 100);
            }, [route]);

            useEffect(() => {
                setMapInteractivity(mapInstanceRef.current, interactive);
                setTimeout(() => { mapInstanceRef.current?.invalidateSize(); }, 80);
            }, [interactive]);

            return (
                <div className="space-y-3">
                    <div className="relative">
                        <div ref={mapRef} className="h-[350px] w-full rounded-md border border-stone-200 z-0 relative shadow-sm style-matsumoto" />
                        <button
                            className="map-toggle-btn"
                            onClick={(e) => {
                                e.stopPropagation();
                                setInteractive((prev) => !prev);
                            }}
                            aria-label={interactive ? "é–å®šåœ°åœ–" : "å•Ÿç”¨åœ°åœ–"}
                        >
                            {interactive ? "ğŸ”’ é»ä¸€ä¸‹é–å®šåœ°åœ–" : "ğŸ‘‰ é»ä¸€ä¸‹å•Ÿç”¨åœ°åœ–"}
                        </button>
                    </div>
                    <div className="grid sm:grid-cols-3 gap-2 text-xs text-stone-600">
                        <div className="flex items-center gap-2 bg-white border border-stone-200 px-3 py-2 rounded">
                            <Compass size={14} className="text-stone-500" />
                            <div className="flex flex-col leading-tight">
                                <span className="text-[10px] uppercase tracking-[0.15em] text-stone-400">Distance</span>
                                <span className="font-semibold text-stone-800">{totalDistanceKm.toFixed(1)} km</span>
                            </div>
                        </div>
                        <div className="sm:col-span-2 bg-white border border-stone-200 px-3 py-2 rounded">
                            <div className="text-[10px] uppercase tracking-[0.15em] text-stone-400 mb-1">Nearby Landmarks</div>
                            <div className="flex flex-wrap gap-1.5">
                                {(route?.landmarks || []).map((spot, idx) => (
                                    <span key={idx} className="inline-flex items-center gap-1 bg-stone-50 border border-stone-200 px-2 py-1 rounded-full text-[11px] font-semibold text-stone-700">
                                        <span>{spot.emoji}</span>
                                        <span className="leading-none">{spot.label}</span>
                                    </span>
                                ))}
                                {(!route?.landmarks || route.landmarks.length === 0) && (
                                    <span className="text-stone-400 text-[11px]">No nearby notes added.</span>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const WeatherIcon = ({ type, size = 14, className = '' }) => {
            switch(type) {
            case 'sun': return <Sun size={size} className={`text-amber-600 ${className}`} />;
            case 'cloud': return <Cloud size={size} className={`text-stone-400 ${className}`} />;
            case 'snow': return <CloudSnow size={size} className={`text-cyan-600 ${className}`} />;
            case 'rain': return <CloudRain size={size} className={`text-blue-600 ${className}`} />;
            default: return <Sun size={size} className={`text-amber-600 ${className}`} />;
            }
        };

        const TripApp = () => {
            const [activeDay, setActiveDay] = useState(0);
            const [selectedEvent, setSelectedEvent] = useState(null);
            const [currentDayKey, setCurrentDayKey] = useState("1219");
            const [prevDayKey, setPrevDayKey] = useState("1219");
            const [transitionDir, setTransitionDir] = useState("forward");
            const [slideInKey, setSlideInKey] = useState("1219");

            const coords = useMemo(() => ({
                tpe: [25.0797, 121.2342], nrt: [35.7719, 140.3929], roppongi: [35.6628, 139.7314],
                ginza: [35.6712, 139.7665], hibiya: [35.6736, 139.7562], tokyoSt: [35.6812, 139.7671],
                takasaki: [36.3220, 139.0125], daruma: [36.3150, 138.9760], karuizawa: [36.3435, 138.6355],
                kusatsu: [36.6208, 138.5963], yokohama: [35.4596, 139.6433], redbrick: [35.4526, 139.6429],
                shinyokohama: [35.5098, 139.6176]
            }), []);

            const mapRoutes = useMemo(() => [
                { 
                    id: 'day1', 
                    path: [coords.nrt, coords.roppongi], 
                    stops: [{ name: "æˆç”°", coord: coords.nrt, landmark: "" }, { name: "å…­æœ¬æœ¨", coord: coords.roppongi, landmark: "" }],
                    landmarks: [
                        { emoji: "ğŸ›«", label: "æˆç”°ç©ºæ¸¯ T1 å±•æœ›å°", coord: [35.7719, 140.3929] },
                        { emoji: "ğŸ—¼", label: "æ±äº¬ã‚¿ãƒ¯ãƒ¼ å¤œæ™¯", coord: [35.6586, 139.7454] },
                        { emoji: "ğŸ™ï¸", label: "æ±ç•™ æ¿±é›¢å®®åº­åœ’", coord: [35.6639, 139.7634] },
                        { emoji: "ğŸŒ‰", label: "å½©è™¹å¤§æ©‹ è§€æ™¯", coord: [35.6350, 139.7634] }
                    ]
                },
                { 
                    id: 'day2', 
                    path: [coords.roppongi, coords.ginza, coords.hibiya, coords.roppongi], 
                    stops: [{ name: "å…­æœ¬æœ¨", coord: coords.roppongi, landmark: "" }, { name: "éŠ€åº§", coord: coords.ginza, landmark: "" }, { name: "æ—¥æ¯”è°·", coord: coords.hibiya, landmark: "" }],
                    landmarks: [
                        { emoji: "ğŸ¨", label: "æ£®ç¾è¡“é¤¨", coord: [35.6605, 139.7293] },
                        { emoji: "ğŸ›ï¸", label: "éŠ€åº§ä¸­å¤®é€šã‚Š", coord: [35.6712, 139.7650] },
                        { emoji: "ğŸŒ¿", label: "æ—¥æ¯”è°·å…¬åœ’", coord: [35.6750, 139.7570] },
                        { emoji: "ğŸ¬", label: "TOHO Hibiya æˆ²é™¢è¡—", coord: [35.6744, 139.7584] },
                        { emoji: "ğŸœ", label: "æœ‰æ¨‚ç”º é«˜æ¶ä¸‹ç¾é£Ÿ", coord: [35.6731, 139.7633] }
                    ]
                },
                { 
                    id: 'day3', 
                    path: [coords.roppongi, coords.tokyoSt, coords.takasaki, coords.daruma, coords.takasaki, coords.karuizawa, coords.kusatsu], 
                    stops: [{ name: "æ±äº¬", coord: coords.tokyoSt, landmark: "" }, { name: "é«˜å´", coord: coords.takasaki, landmark: "" }, { name: "è‰æ´¥", coord: coords.kusatsu, landmark: "" }],
                    landmarks: [
                        { emoji: "ğŸ¯", label: "é«˜å´é”ç£¨å¯º", coord: [36.3285, 139.0036] },
                        { emoji: "ğŸŒ²", label: "è»½äº•æ²¢ é›²å ´æ± ", coord: [36.3578, 138.6277] },
                        { emoji: "â™¨ï¸", label: "è‰æ´¥æ¸©æ³‰ æ¹¯ç•‘", coord: [36.6208, 138.5963] },
                        { emoji: "ğŸš‚", label: "ç¾¤é¦¬ è’¸æ°£å°ç«è»Šå±•ç¤º", coord: [36.3289, 139.0128] },
                        { emoji: "ğŸ”ï¸", label: "æ·ºé–“å±± é çœº", coord: [36.4069, 138.5232] }
                    ]
                },
                { 
                    id: 'day4', 
                    path: [coords.kusatsu, coords.karuizawa, coords.tokyoSt, coords.yokohama, coords.redbrick], 
                    stops: [{ name: "è‰æ´¥", coord: coords.kusatsu, landmark: "" }, { name: "è»½äº•æ²¢", coord: coords.karuizawa, landmark: "" }, { name: "æ¨ªæµœ", coord: coords.yokohama, landmark: "" }],
                    landmarks: [
                        { emoji: "ğŸƒ", label: "æ—§è»½äº•æ²¢ éŠ€åº§é€šã‚Š", coord: [36.3451, 138.6419] },
                        { emoji: "âš“", label: "æ¨ªæµœèµ¤ãƒ¬ãƒ³ã‚¬å€‰åº«", coord: [35.4526, 139.6429] },
                        { emoji: "ğŸ¡", label: "ã‚³ã‚¹ãƒ¢ã‚¯ãƒ­ãƒƒã‚¯21", coord: [35.4575, 139.6340] },
                        { emoji: "â›ª", label: "å±±ä¸‹å…¬åœ’ & æ°·å·ä¸¸", coord: [35.4430, 139.6502] },
                        { emoji: "ğŸï¸", label: "æ¸¯ã®è¦‹ãˆã‚‹ä¸˜å…¬åœ’", coord: [35.4414, 139.6521] }
                    ]
                },
                { 
                    id: 'day5', 
                    path: [coords.yokohama, coords.shinyokohama, coords.nrt], 
                    stops: [{ name: "æ¨ªæµœ", coord: coords.yokohama, landmark: "" }, { name: "æ–°æ¨ªæµœ", coord: coords.shinyokohama, landmark: "" }, { name: "æˆç”°", coord: coords.nrt, landmark: "" }],
                    landmarks: [
                        { emoji: "ğŸŸï¸", label: "æ—¥ç”£ã‚¹ã‚¿ã‚¸ã‚¢ãƒ ", coord: [35.5090, 139.6060] },
                        { emoji: "ğŸœ", label: "æ–°æ¨ªæµœãƒ©ãƒ¼ãƒ¡ãƒ³åšç‰©é¤¨", coord: [35.5095, 139.6158] },
                        { emoji: "ğŸ›«", label: "æˆç”°ç©ºæ¸¯ ã•ãã‚‰ã®å±±", coord: [35.7796, 140.3712] },
                        { emoji: "ğŸ§¸", label: "ANA FESTA åœŸç”¢åº—", coord: [35.7719, 140.3929] },
                        { emoji: "ğŸŒ¾", label: "æˆç”°å±±æ–°å‹å¯º", coord: [35.7830, 140.3186] }
                    ]
                }
            ], [coords]);

            const schedule = useMemo(() => [
                {
                date: "12/19",
                day: "é‡‘æ›œæ—¥(Fri)",
                title: "å…‰ã¨å½±ã®åºç« ",
                subtitle: "Prologue of Light and Shadow",
                location: "å°åŒ— â†’ æ±äº¬ â†’ å…­æœ¬æœ¨",
                theme: { main: "text-slate-900", sub: "text-slate-600", btn: "bg-slate-800" },
                events: [
                    { 
                    time: "14:40", 
                    endTime: "19:00", 
                    type: "flight", 
                    title: "é£›å¾€æ±äº¬ï¼šå•Ÿç¨‹", 
                    desc: "æ­ä¹˜é…·èˆª TR874 å¤¢å¹»å®¢æ©Ÿã€‚", 
                    preview: "å…‰å¾è·‘é“å‡èµ·ï¼Œå½±å­ç•™åœ¨é›²ä¸‹ï¼Œç¬¬ä¸€å¹•é–‹å ´ã€‚",
                    details: "LABORATORY: GAIAC 10 // TOKYO \n\næˆåˆ†ï¼šæªœæœ¨ã€éºé¦™ã€ç™’å‰µæœ¨ã€ä¹³é¦™ã€‚\n\nç‹€æ…‹ï¼šé£›è¡Œä¸­ã€‚\n\né€™ä¸åƒ…æ˜¯ä¸€æ¬¡ç§»å‹•ï¼Œè€Œæ˜¯ä¸€å ´å—…è¦ºçš„æ·¨åŒ–ã€‚è„«é›¢åœ°é¢çš„ç¬é–“ï¼Œå¦‚åŒå™´ç‘åœ¨è©¦ç´™ä¸Šçš„å‰èª¿ï¼Œæ¸…å†½è€Œå……æ»¿æœŸå¾…ã€‚è‰™å…§çš„ä¹¾ç‡¥ç©ºæ°£æ··åˆè‘—æ·¡æ·¡çš„çš®é©å‘³ï¼Œé€™æ˜¯æ—…è¡Œå°ˆå±¬çš„æ°£æ¯ã€‚",
                    locationQuery: "Taoyuan International Airport Terminal 1",
                    icon: Plane,
                    style: 'gaiac', // GAIAC 10 Style
                    weather: { type: 'cloud', current: '18Â°C', high: '21Â°C', low: '16Â°C', loc: 'TPE' },
                    keywords: ["Le Labo", "Woody", "Musk"],
                    outfit: "æ©Ÿè‰™å…§æ°£å£“è¼ƒä½ä¸”ä¹¾ç‡¥ã€‚å»ºè­°ç©¿è‘—ç´”æ£‰æè³ªï¼Œä¿æŒæ¥µç°¡ã€‚",
                    insights: {
                        travel: "é…·èˆªé€™ç­é€šå¸¸ç”¨æ³¢éŸ³ 787 å»£é«”å®¢æ©ŸåŸ·é£›ã€‚",
                        creative: "å¤¢å¹»å®¢æ©Ÿçš„çª—æˆ¶èª¿å…‰æŠ€è¡“ï¼Œè®“æ©Ÿè‰™å…§çš„å…‰ç·šè®ŠåŒ–åƒæ°´å½©æšˆæŸ“ä¸€æ¨£æŸ”å’Œã€‚",
                        history: "ã€æˆç”°æŠ—çˆ­ã€‘æˆç”°æ©Ÿå ´çš„å»ºè¨­å²æ˜¯æ—¥æœ¬æˆ°å¾Œæœ€æ¿€çƒˆçš„è­¦æ°‘è¡çªä¹‹ä¸€ã€‚",
                        shopping: "ã€æ©Ÿå ´é™å®šã€‘è‹¥åœ¨æˆç”°çœ‹åˆ°ã€ŒNew York Perfect Cheeseã€ä¸”ä¸ç”¨æ’éšŠï¼Œè«‹å‹™å¿…æƒè²¨ã€‚"
                    },
                    vocabulary: [
                        { term: "æ­ä¹—", reading: "ã¨ã†ã˜ã‚‡ã†", meaning: "ç™»æ©Ÿ", desc: "ã€Œæ­ã€æ˜¯ä¹˜åï¼Œã€Œä¹—ã€ä¹Ÿæ˜¯ä¹˜åã€‚é›™é‡çš„ä¹˜åä¹‹æ„ã€‚" },
                        { term: "æ‰‹è·ç‰©", reading: "ã¦ã«ã‚‚ã¤", meaning: "éš¨èº«è¡Œæ", desc: "ã€Œæ‰‹ã€æçš„ã€Œè·ç‰©ã€ï¼ˆè²¨ç‰©ï¼‰ã€‚" }
                    ],
                    flightInfo: { checkIn: "12:10", boarding: "13:55", departure: "14:40", arrival: "19:00", terminal: "T1" }
                    },
                    { 
                    time: "19:40", 
                    endTime: "20:50", 
                    type: "transport", 
                    title: "æˆç”°ç‰¹æ€¥ N'EX", 
                    desc: "å‰å¾€å…­æœ¬æœ¨çš„ç´…è‰²é–ƒé›»", 
                    preview: "ç´…é»‘åˆ—è»Šç©¿éæš—ç”°é€²éœ“è™¹ï¼Œå…‰å½±é‚Šç•Œä¸€ç·šä¹‹éš”ã€‚",
                    details: "é™è½å¾Œï¼Œæˆ‘å€‘å°‡æ­ä¹˜ JR çš„æ‹›ç‰Œåˆ—è»Šã€Œæˆç”°ç‰¹æ€¥ (Narita Express)ã€ã€‚è»Šçª—å¤–çš„æ™¯è‰²å¾é»‘æš—çš„ç”°é‡ç¬é–“åˆ‡æ›åˆ°åˆºçœ¼çš„éƒ½å¸‚éœ“è™¹ï¼Œé€™ä¸åƒ…æ˜¯ç‰©ç†ä¸Šçš„ç§»å‹•ï¼Œæ›´åƒæ˜¯ä¸€å ´æ„è­˜æµçš„å‰ªæ¥ã€‚ç´…é»‘é…è‰²çš„è»Šé«”ï¼Œå¦‚åŒè­¦å‘Šä¿¡è™Ÿèˆ¬åŠƒç ´å¤œç©ºã€‚",
                    locationQuery: "å…­æœ¬æœ¨é§…",
                    icon: Train,
                    style: 'kon', // Kon Style
                    weather: { type: 'rain', current: '8Â°C', high: '11Â°C', low: '5Â°C', loc: 'Tokyo' },
                    keywords: ["ç¾å¯¦çš„é‚Šç•Œ", "ç´…è‰²é–ƒé›»", "éƒ½å¸‚é€²å…¥"],
                    outfit: "æ—¥æœ¬é›»è»Šæš–æ°£é€šå¸¸é–‹å¾—éå¸¸å¼·ï¼ˆç´„25åº¦ä»¥ä¸Šï¼‰ã€‚é€²è»Šå»‚å¾Œå»ºè­°ç«‹åˆ»è„«ä¸‹åšå¤–å¥—ã€‚",
                    insights: {
                        travel: "å¤–åœ‹äººæ†‘è­·ç…§è²·ã€N'EX æ±äº¬å»å›è»Šç¥¨ (Â¥5000)ã€æœ€åˆ’ç®—ï¼Œæ¯”å–®ç¨‹è²·çœä¸‹è¿‘ 4000 æ—¥åœ“ã€‚",
                        local: "ã€Œèªªå¯¦è©±ï¼Œæˆ‘å€‘ç•¶åœ°äººè¦ºå¾— N'EX åŸåƒ¹å¤ªè²´äº†ï¼Œé€šå¸¸éƒ½æ­å¿«é€Ÿé›»è»Šæˆ–å·´å£«ã€‚ã€",
                        creative: "è»Šçª—å¤–çš„æ™¯è‰²å¾é»‘æš—çš„ç”°é‡ç¬é–“åˆ‡æ›åˆ°åˆºçœ¼çš„éƒ½å¸‚éœ“è™¹ï¼Œé€™ä¸åƒ…æ˜¯ç‰©ç†ä¸Šçš„ç§»å‹•ï¼Œæ›´åƒæ˜¯ä¸€å ´æ„è­˜æµçš„å‰ªæ¥ã€‚",
                        business: "ã€å·®åˆ¥å®šåƒ¹ç­–ç•¥ã€‘JR æ±æ—¥æœ¬å°å¤–åœ‹äººæä¾›å¤§å¹…æŠ˜æ‰£ï¼Œæ—¨åœ¨æ¶æ”»å…¥å¢ƒæ—…éŠå¸‚å ´ä»½é¡ï¼Œå°æŠ—äº¬æˆé›»éµ Skyliner çš„é€Ÿåº¦å„ªå‹¢ã€‚"
                    },
                    vocabulary: [
                        { term: "æŒ‡å®šå¸­", reading: "ã—ã¦ã„ã›ã", meaning: "å°è™Ÿåº§", desc: "æ˜ç¢ºæŒ‡å‡ºä¸¦æ±ºå®šå¥½çš„ä½å­ã€‚" },
                        { term: "å¢ƒç•Œç·š", reading: "ãã‚‡ã†ã‹ã„ã›ã‚“", meaning: "é‚Šç•Œç·š", desc: "æˆç”°èˆ‡æ±äº¬ä¹‹é–“ï¼Œæ˜¯å¤¢å¢ƒèˆ‡ç¾å¯¦çš„é‚Šç•Œã€‚" }
                    ],
                    timetable: [{ time: "19:48", label: "N'EX 50è™Ÿ", highlight: true }, { time: "20:15", label: "Skyliner" }, { time: "20:44", label: "N'EX 52è™Ÿ" }]
                    },
                    { 
                    time: "20:50", 
                    type: "hotel", 
                    title: "APA å…­æœ¬æœ¨é£¯åº—", 
                    desc: "éƒ½å¸‚å¢æ—ä¸­çš„æ£²èº«ä¹‹æ‰€", 
                    preview: "éœ“è™¹èˆ‡ç‹¹ç¸«æˆ¿é–“äº¤éŒ¯çš„å¤œåŸºåœ°ï¼Œå…‰å½±äº¤çºçš„æ£²èº«æ‰€ã€‚",
                    price: "$3068", 
                    details: "æ­¡è¿ä¾†åˆ°åŸå®¿...å•Šä¸ï¼Œæ˜¯å…­æœ¬æœ¨ï¼APA é£¯åº—å°±æ˜¯éƒ½å¸‚è£¡çš„æ€ªç¸å¤§å»ˆã€‚é€™è£¡æ··é›œè‘—å•†å‹™å®¢ã€è§€å…‰å®¢èˆ‡å¤œç”Ÿæ´»çš„äººç¾¤ã€‚æ¥µåº¦ç‹¹çª„çš„ç©ºé–“èˆ‡æ¥µåº¦é®®è±”çš„ç¤¾é•·çœ‹æ¿ï¼Œæ§‹æˆäº†ä¸€ç¨®å¼·çƒˆçš„è¦–è¦ºè¡æ“Šã€‚é€™å°±æ˜¯æ±äº¬ï¼Œæ“æ“ ã€æ··äº‚ï¼Œå»å……æ»¿èƒ½é‡ã€‚",
                    locationQuery: "APA Hotel Roppongi Ekimae",
                    icon: Hotel,
                    style: 'harajuku', // Harajuku Style
                    weather: { type: 'cloud', current: '7Â°C', high: '10Â°C', low: '4Â°C', loc: 'Roppongi' },
                    keywords: ["KAWAII", "CHAOS", "TOKYO POP"],
                    outfit: "åœ¨é€™è£¡ï¼Œä½ æƒ³ç©¿ä»€éº¼å°±ç©¿ä»€éº¼ï¼è¶Šèª‡å¼µè¶Šå¥½ï¼æŠŠæ‰€æœ‰é¡è‰²éƒ½ç©¿åœ¨èº«ä¸Šå§ï¼",
                    insights: {
                        travel: "APA çš„æˆ¿é–“ä»¥ã€Œæ¥µè‡´å£“ç¸®ã€èåã€‚å»ºè­°å…¥ä½ç¬¬ä¸€ä»¶äº‹æ˜¯ç¢ºèªåºŠåº•ä¸‹çš„ç©ºé–“ã€‚",
                        local: "ã€Œå…­æœ¬æœ¨æ™šä¸Šçš„é»‘äººæ‹‰å®¢å°å“¥ï¼ˆToutï¼‰å¾ˆå¤šï¼Œçœ¼ç¥ä¸è¦å°ä¸Šï¼Œç›´æ¥èµ°éå»å°±å¥½ã€‚ã€",
                        business: "ã€é€†å‹¢æ”¶è³¼ã€‘APA é›†åœ˜åœ¨æ³¡æ²«ç¶“æ¿Ÿå´©æ½°å¾Œå¤§é‡ä½åƒ¹æ”¶è³¼åœŸåœ°ã€‚æˆ¿é–“æŠ½å±œè£¡ä¸€å®šæœ‰ç¤¾é•·çš„å‹µå¿—æ›¸ã€‚",
                        politics: "ã€å³ç¿¼è‰²å½©ã€‘APA é›†åœ˜å‰µè¾¦äººå…ƒè°·å¤–å¿—é›„ä»¥æ¥µå³ç¿¼æ”¿æ²»ç«‹å ´èåã€‚",
                        shopping: "ã€ç¤¾é•·å’–å“©ã€‘APA æ«ƒæª¯è²©å”®çš„ã€ŒAPA ç¤¾é•·å’–å“©ã€å…¶å¯¦æ„å¤–çš„å¥½åƒï¼Œæ˜¯é‡‘æ¾¤å’–å“©é¢¨å‘³ã€‚"
                    },
                    vocabulary: [
                        { term: "ç´ æ³Šã¾ã‚Š", reading: "ã™ã©ã¾ã‚Š", meaning: "ç´”ä½å®¿", desc: "æŒ‡ä¸å«é¤é»çš„ç´”ä½å®¿æ–¹æ¡ˆã€‚" },
                        { term: "å¤§æµ´å ´", reading: "ã ã„ã‚ˆãã˜ã‚‡ã†", meaning: "å…¬å…±æ¾¡å ‚", desc: "å³ä½¿æˆ¿é–“æœ‰æµ´å®¤ï¼Œæ—¥æœ¬äººé‚„æ˜¯å–œæ­¡å»å¤§æµ´å ´æ³¡æ¾¡ã€‚" }
                    ]
                    },
                    { 
                    time: "21:30", 
                    type: "food", 
                    title: "Shabuzen å…­æœ¬æœ¨", 
                    desc: "é»‘æ¯›å’Œç‰›çš„å‘³è¦ºé¥—å®´", 
                    preview: "éœ§æ°£èˆ‡è‚‰é¦™åŒæ™‚å‡èµ·ï¼Œå…‰ç…§é‹é¢ã€å½±è½å¿ƒåº•ã€‚",
                    details: "æˆ‘...å¥½é¤“...è‚‰...æ–°é®®çš„è‚‰... Shabuzen çš„é»‘æ¯›å’Œç‰›åƒåˆ°é£½ï¼Œå°æ–¼é£¢é¤“çš„éˆé­‚ä¾†èªªæ˜¯ç„¡æ³•æŠ—æ‹’çš„èª˜æƒ‘ã€‚çœ‹è‘—ç´…è‰²çš„è‚‰ç‰‡åœ¨æ»¾ç‡™çš„æ¹¯æ±ä¸­ç¿»æ»¾ï¼Œé‚£ä¸€ç¬é–“ï¼Œç†æ™ºæ–·ç·šï¼Œåªå‰©ä¸‹æœ€åŸå§‹çš„é£Ÿæ…¾ã€‚é€™ä¸æ˜¯æ™šé¤ï¼Œé€™æ˜¯ç‹©çµã€‚",
                    locationQuery: "Shabuzen Roppongi",
                    icon: Utensils,
                    style: 'ghoul', // Tokyo Ghoul Style
                    weather: { type: 'cloud', current: '7Â°C', high: '10Â°C', low: '4Â°C', loc: 'Roppongi' },
                    keywords: ["æš´é£Ÿ", "èµ«å­", "A5å’Œç‰›"],
                    outfit: "å»ºè­°ç©¿è‘—æ·±è‰²è¡£æœï¼Œå› ç‚ºåƒè‚‰çš„æ™‚å€™å¯èƒ½æœƒå™´æ¿º...æ¹¯æ±ã€‚",
                    insights: {
                        travel: "æ—¥æœ¬å£½å–œç‡’åˆ†é—œæ±é¢¨èˆ‡é—œè¥¿é¢¨ã€‚é€™è£¡æä¾›çš„æ˜¯é©åˆåƒåˆ°é£½çš„é—œæ±é¢¨ï¼ˆé†¬æ±ç…®ï¼‰ã€‚",
                        creative: "è§€å¯Ÿå’Œç‰›åˆ‡ç‰‡ä¸Šå¦‚åŒå¤§ç†çŸ³èˆ¬çš„æ²¹èŠ±ç´‹è·¯ï¼Œé‚£æ˜¯ä¸€ç¨®å¤©ç„¶çš„è—è¡“å“ã€‚",
                        business: "ã€å’Œç‰›æœŸè²¨ã€‘A5 ç­‰ç´šä¸åƒ…æ˜¯å£æ„Ÿæ¨™æº–ï¼Œæ›´æ˜¯é‡‘èèˆ¬çš„å®šåƒ¹ä¾æ“šã€‚",
                        history: "ã€æ–‡æ˜é–‹åŒ–ã€‘æ˜æ²»å¤©çš‡åœ¨ 1872 å¹´è§£é™¤è‚‰é£Ÿç¦ä»¤ï¼Œå£½å–œç‡’ï¼ˆç‰›é‹ï¼‰æˆç‚ºç•¶æ™‚æœ€æ½®çš„è±¡å¾µã€‚"
                    },
                    vocabulary: [
                        { term: "é£Ÿã¹æ”¾é¡Œ", reading: "ãŸã¹ã»ã†ã ã„", meaning: "åƒåˆ°é£½", desc: "ã€Œæ”¾ã€æ˜¯é‡‹æ”¾ï¼Œã€Œé¡Œã€åœ¨æ­¤æŒ‡ç¯„åœã€‚" },
                        { term: "å–°ç¨®", reading: "ã‚°ãƒ¼ãƒ«", meaning: "å–°ç¨®", desc: "ä»¥äººé¡ç‚ºé£Ÿçš„äºäººç¨®ã€‚ä½†åœ¨é€™è£¡ï¼Œæˆ‘å€‘åƒçš„æ˜¯ç‰›ã€‚" }
                    ]
                    }
                ]
                },
                {
                date: "12/20",
                day: "åœŸæ›œæ—¥(Sat)",
                title: "æ˜­å’Œã¨æœªæ¥ã®ç‹­é–“",
                subtitle: "Between Showa and Future",
                location: "éŠ€åº§ãƒ»æœ‰æ¨‚ç”ºãƒ»å…­æœ¬æœ¨",
                theme: { main: "text-stone-800", sub: "text-stone-500", btn: "bg-stone-700" },
                events: [
                    { 
                    time: "12:00", 
                    type: "food", 
                    title: "é®¨ãƒ»Itsumi", 
                    desc: "èµ¤å‚çš„éš±è—ç‰ˆ Omakase", 
                    preview: "æ˜­å’Œå··å¼„çš„éœè¬å§å°ï¼Œæ¡å‡ºæœªä¾†çš„å‘³é“ã€‚",
                    details: "ã€Œè¨˜æ†¶ï¼Œå°±åƒé€™è²«å£½å¸çš„é¤˜éŸ»ï¼Œæ¨¡ç³Šå»çœŸå¯¦ã€‚ã€åœ¨çŸ³é»‘ä¸€é›„çš„ç­†ä¸‹ï¼Œæ¯ä¸€å£é£Ÿç‰©éƒ½æ˜¯é€šå¾€éå»çš„é‘°åŒ™ã€‚èµ¤å‚é€™é–“éš±å¯†çš„å£½å¸åº—ï¼Œå¸«å‚…å®‰éœåœ°æè£½è‘—å£½å¸ï¼Œå½·å½¿åœ¨ä¿®å¾©è‘—æŸæ®µå¤±è½çš„æ™‚å…‰ã€‚é†‹é£¯çš„æº«åº¦ã€é­šæ–™çš„ç†Ÿæˆï¼Œéƒ½æ˜¯ç‚ºäº†é‚£ä¸€ç¬é–“çš„å®Œç¾è€Œå­˜åœ¨ï¼Œç„¶å¾Œæ¶ˆé€ï¼Œåªç•™ä¸‹å›æ†¶ã€‚",
                    locationQuery: "Sushi Itsumi",
                    icon: Utensils,
                    style: 'ishiguro', // Ishiguro Style
                    weather: { type: 'sun', current: '11Â°C', high: '13Â°C', low: '9Â°C', loc: 'Tokyo' },
                    keywords: ["ä¸å¯é çš„æ•˜äº‹è€…", "é»ƒæ˜çš„èµ¤å‚", "è¨˜æ†¶çš„é¤˜ç‡¼"],
                    outfit: "å»ºè­°ç©¿è‘—ã€ŒåŠæ­£å¼ä¼‘é–’ (Smart Casual)ã€ã€‚ä¸€ä»¶å‰ªè£åˆå®œçš„å¤§è¡£ï¼Œæˆ–è¨±èƒ½æ©è“‹å…§å¿ƒçš„æ³¢ç€¾ã€‚",
                    insights: {
                        travel: "åƒ Omakase åˆ‡è¨˜ã€Œä¸è¦å™´é¦™æ°´ã€ã€‚å¸«å‚…ä¸Šèœå¾Œå»ºè­° 3 ç§’å…§å…¥å£ï¼Œæº«åº¦æœ€å®Œç¾ã€‚",
                        local: "ã€Œåˆé¤åƒ Omakase æ˜¯æ±äº¬äººçš„çœéŒ¢æ™ºæ…§ï¼ä¸€æ¨£çš„é­šæ–™ï¼Œåƒ¹æ ¼åªè¦æ™šé¤çš„ä¸€åŠã€‚ã€",
                        creative: "å£½å¸å¸«å‚…æè£½å£½å¸çš„æ‰‹å‹¢å¦‚åŒèˆè¹ˆï¼Œè¿½æ±‚çš„æ˜¯ã€Œç©ºæ°£æ„Ÿã€ã€‚",
                        business: "ã€åªæ•ˆæ¥µå¤§åŒ–ã€‘æ¿å‰å£½å¸åº—åƒ…æœ‰ç´„ 10 å€‹åº§ä½ï¼Œå»èƒ½å‰µé€ é©šäººç‡Ÿæ”¶ã€‚ç§˜è¨£åœ¨æ–¼ã€Œç„¡èœå–®ã€æ¨¡å¼è®“åº«å­˜è€—æé™è‡³æœ€ä½ã€‚",
                        shopping: "ã€é«˜ç´šèŒ¶è‘‰ã€‘è¨±å¤šå£½å¸åº—ä½¿ç”¨çš„ã€Œç²‰èŒ¶ã€æˆ–ã€Œç¶ èŒ¶ã€å“è³ªæ¥µä½³ï¼Œéƒ¨åˆ†åº—å®¶æœƒè²©å”®è‡ªå®¶ä½¿ç”¨çš„èŒ¶è‘‰åŒ…ã€‚"
                    },
                    vocabulary: [
                        { term: "ãŠä»»ã›", reading: "ãŠã¾ã‹ã›", meaning: "ä¿¡ä»»ä¸»å»š", desc: "æºè‡ªã€Œä»»ã›ã‚‹ã€ï¼Œä»£è¡¨ä¿¡ä»»å¸«å‚…çš„å°ˆæ¥­ã€‚" },
                        { term: "åæ®‹", reading: "ãªã”ã‚Š", meaning: "é¤˜éŸ»", desc: "äº‹ç‰©é›¢å»å¾Œç•™ä¸‹çš„ç—•è·¡æˆ–æ°£æ°›ã€‚å£½å¸å…¥å£å¾Œçš„é¤˜éŸ»ï¼Œæ˜¯å“åšçš„é‡é»ã€‚" }
                    ]
                    },
                    { 
                    time: "13:30", 
                    type: "activity", 
                    title: "æœ‰æ¨‚ç”ºå¤§æ±Ÿæˆ¶å¤è‘£å¸‚é›†", 
                    desc: "è¬äº‹å±‹çš„å°‹å¯¶å§”è¨—", 
                    preview: "ç»ç’ƒå¸·å¹•ä¸‹çš„æ˜­å’Œå¯¶ç‰©ï¼ŒæŠŠéå»æ”¤åœ¨æœªä¾†å…‰å½±è£¡ã€‚",
                    details: "å–‚å–‚ï¼Œæ–°å…«ï¼è½èªªé€™è£¡æœ‰è³£é˜¿é€šå°å§çš„çµ•ç‰ˆå”±ç‰‡ï¼Ÿé€™è£¡å¯æ˜¯æœ‰æ¨‚ç”ºå•Šï¼Œä¸æ˜¯æ­Œèˆä¼ç”ºï¼åœ¨ç¾ä»£åŒ–çš„æ±äº¬åœ‹éš›è«–å£‡å¤§æ¨“å»£å ´ï¼Œæ¯æœˆèˆ‰è¾¦å…©æ¬¡çš„ã€Œå¤§æ±Ÿæˆ¶å¤è‘£å¸‚é›†ã€ã€‚é›–ç„¶æ²’æœ‰å¤©äººï¼Œä½†é€™è£¡æœ‰æ˜­å’Œæ™‚ä»£çš„ç ´éŠ…çˆ›éµ...å•Šä¸ï¼Œæ˜¯çè²´çš„å¤è‘£ã€‚åœ¨æ‘©å¤©å¤§æ¨“çš„é™°å½±ä¸‹ï¼Œå……æ»¿äº†åæ§½é»èˆ‡å¯¶ç‰©ã€‚",
                    locationQuery: "Tokyo International Forum",
                    icon: ShoppingBag,
                    style: 'gintama', // Gintama Style
                    weather: { type: 'sun', current: '12Â°C', high: '14Â°C', low: '10Â°C', loc: 'Yurakucho' },
                    keywords: ["è¬äº‹å±‹", "ç³–åˆ†æ”å–", "æ˜­å’Œå¾©å¤"],
                    outfit: "åªè¦ä¸æ˜¯ç©¿è‘—é‚£ä»¶å¯«è‘—ã€Œç³–åˆ†ã€çš„Tæ¤ï¼Œç©¿ä»€éº¼éƒ½å¯ä»¥ã€‚è¨˜å¾—ç©¿å¥½èµ°çš„é‹å­ï¼Œä¸ç„¶è…³æœƒæ–·æ‰é˜¿é­¯ã€‚",
                    insights: {
                        travel: "è¨±å¤šæ”¤ä½æ˜¯è€çˆºçˆºè€å¥¶å¥¶æ“ºæ”¤ï¼Œ**åªæ”¶ç¾é‡‘**ã€‚çœ‹åˆ°å–œæ­¡çš„è¦é¦¬ä¸Šä¸‹æ‰‹ã€‚",
                        local: "ã€Œä»¥å‰é€™è£¡éƒ½æ˜¯è€äººå®¶åœ¨é€›ï¼Œæœ€è¿‘å¤–åœ‹äººè®Šå¤šäº†ï¼Œåƒ¹æ ¼ä¹Ÿç¨å¾®è¢«ç‚’é«˜äº†ã€‚ã€",
                        creative: "è§€å¯Ÿæ˜­å’Œæ™‚ä»£çš„å»£å‘Šå­—é«”èˆ‡åŒ…è£è¨­è¨ˆï¼Œé‚£ç¨®æ‰‹ç¹ªçš„æº«åº¦æ˜¯ç¾ä»£è¨­è¨ˆæ‰¾ä¸åˆ°çš„ã€‚",
                        business: "ã€ç”Ÿå‰æ•´ç†å•†æ©Ÿã€‘æ—¥æœ¬é€²å…¥è¶…é«˜é½¡ç¤¾æœƒï¼Œå¤§é‡çš„ã€Œç”Ÿå‰æ•´ç†ã€ç‰©æµå…¥äºŒæ‰‹å¸‚å ´ã€‚",
                        shopping: "ã€Old Noritakeã€‘é€™è£¡å¸¸èƒ½æŒ–åˆ°æ—¥æœ¬ç“·å™¨åç‰Œã€ŒNoritakeã€æ—©æœŸçš„å¤–éŠ·æ¬¾å¼ã€‚"
                    },
                    vocabulary: [
                        { term: "æ˜ã‚Šå‡ºã—ç‰©", reading: "ã»ã‚Šã ã—ã‚‚ã®", meaning: "æŒ–åˆ°çš„å¯¶", desc: "æŒ‡åœ¨é›œäº‚çš„æ±è¥¿ä¸­æ„å¤–ç™¼ç¾çš„çå“ã€‚" },
                        { term: "ãŠã¾ã‘", reading: "ãŠã¾ã‘", meaning: "æ®ºå¿…æ­»/è´ˆå“", desc: "åŸæœ¬æ˜¯ã€Œé™„åŠ ã€æ·»é ­ã€çš„æ„æ€ã€‚" }
                    ]
                    },
                    { 
                    time: "15:00", 
                    type: "activity", 
                    title: "çš‡å±…å¤–è‹‘ / æ—¥æ¯”è°·å…¬åœ’", 
                    desc: "æ¬ŠåŠ›èˆ‡ç¶ åœ°çš„äº¤éŸ¿æ›²", 
                    preview: "çŸ³ç‰†èˆ‡æ¾æ—å°è©±è²¡é–¥é«˜æ¨“ï¼Œæ˜­å’Œå¨åš´é€£æ¥ç¾ä»£é‡‘èã€‚",
                    details: "é€™è£¡æ˜¯æ±äº¬çš„å¿ƒè‡Ÿï¼Œä¹Ÿæ˜¯æ¬ŠåŠ›çš„è±¡å¾µã€‚ä½å‹å•†äº‹ï¼ˆSumitomo Corporationï¼‰é¢¨æ ¼çš„ç©©é‡èˆ‡ä¿¡ç”¨ï¼Œç€°æ¼«åœ¨ä¸¸ä¹‹å…§èˆ‡æ—¥æ¯”è°·çš„ç©ºæ°£ä¸­ã€‚å¾çš‡å±…å¤–è‹‘çš„èŠåš´æ¾æ—ï¼Œåˆ°æ—¥æ¯”è°·å…¬åœ’çš„è¿‘ä»£æ´‹é¢¨è¨­è¨ˆï¼Œæ¯ä¸€æ­¥éƒ½è¸åœ¨æ—¥æœ¬ç¾ä»£åŒ–çš„æ­·å²åŸºçŸ³ä¸Šã€‚é€™æ˜¯ä¸€å ´é—œæ–¼ã€Œä¿¡ç”¨ã€èˆ‡ã€Œå‚³çµ±ã€çš„æ•£ç­–ã€‚",
                    locationQuery: "Hibiya Park",
                    icon: Camera,
                    style: 'sumitomo', // Sumitomo Style
                    weather: { type: 'cloud', current: '11Â°C', high: '13Â°C', low: '9Â°C', loc: 'Hibiya' },
                    keywords: ["èˆŠè²¡é–¥", "ä¸¸ä¹‹å…§", "ä¿¡ç”¨ç¬¬ä¸€"],
                    outfit: "å»ºè­°ç©¿è‘—æ•´é½Šæ¸…æ½”çš„æœè£ã€‚é€™è£¡å‘¨åœéƒ½æ˜¯é ‚ç´šä¼æ¥­ç¸½éƒ¨ï¼Œä¼‘é–’ä½†ä¸è¦éš¨ä¾¿ã€‚",
                    insights: {
                        travel: "çš‡å±…å¤–è‹‘é‹ªè¨­çš„ç¢çŸ³è·¯ï¼ˆç‰ç ‚åˆ©ï¼‰åŸæœ¬æ˜¯ç‚ºäº†é˜²åˆºå®¢ï¼Œç¾åœ¨å‰‡æ˜¯è§€å…‰å®¢çš„ã€Œè…³åº•æ®ºæ‰‹ã€ã€‚",
                        creative: "çš‡å±…çš„æ¾æ¨¹ä¿®å‰ªæ˜¯ä¸€ç¨®æ¥µè‡´çš„åœ’è—é€ å‹è—è¡“ï¼Œèˆ‡æ±Ÿæˆ¶åŸçš„çŸ³å£å½¢æˆè¦–è¦ºå¹³è¡¡ã€‚",
                        business: "ã€è²¡é–¥ç³»è­œã€‘ä½å‹é›†åœ˜ä»¥ã€Œæµ®åˆ©ã‚’è¿½ã‚ãšï¼ˆä¸è¿½é€æµ®åˆ©ï¼‰ã€ç‚ºå®¶è¨“ï¼Œè±¡å¾µè‘—æ—¥æœ¬ä¼æ¥­ç©©å¥ç¶“ç‡Ÿçš„å“²å­¸ã€‚é€™ä¸€å¸¶çš„è¾¦å…¬å¤§æ¨“å¤šç‚ºä¸‰è±ã€ä¸‰äº•ã€ä½å‹ç­‰è²¡é–¥ç³»æ‰€æœ‰ã€‚",
                        politics: "ã€æ¬ŠåŠ›ä¸­æ¨ã€‘æ—¥æ¯”è°·å…¬åœ’ç·Šé„°ã€Œéœé—œã€èˆ‡ã€Œæ°¸ç”°ç”ºã€ï¼Œé€™è£¡æ˜¯æ—¥æœ¬æ”¿æ²»çš„å¿ƒè‡Ÿåœ°å¸¶ã€‚",
                        shopping: "ã€èŠä¹‹å¾¡ç´‹ã€‘çš‡å±…æ±å¾¡è‹‘çš„è²©è³£éƒ¨æœ‰è³£å°æœ‰çš‡å®¶å®¶å¾½çš„éŒ¢åŒ…èˆ‡çš®é©è£½å“ã€‚"
                    },
                    vocabulary: [
                        { term: "æ•£ç­–", reading: "ã•ã‚“ã•ã", meaning: "æ•£æ­¥", desc: "æ¯”æ™®é€šçš„ã€Œæ•£æ­¥ã€æ›´æœ‰è©©æ„ã€‚" },
                        { term: "ä¿¡ç”¨", reading: "ã—ã‚“ã‚ˆã†", meaning: "ä¿¡ç”¨", desc: "å•†ç¤¾æœ€é‡è¦–çš„è³‡ç”¢ï¼Œä¹Ÿæ˜¯æ—¥æœ¬å•†æ¥­ç¤¾æœƒçš„åŸºçŸ³ã€‚" }
                    ]
                    },
                    { 
                    time: "17:30", 
                    type: "activity", 
                    title: "å…­æœ¬æœ¨è–èª•ç‡ˆé£¾", 
                    desc: "ç„¡é™å¢æ®–çš„å…‰é»", 
                    preview: "å†·ç™½ç‡ˆæµ·æŠŠæœªä¾†é»æˆæ˜­å’Œæ˜Ÿæ²³ï¼Œæˆ€äººç©¿æ¢­å…¶é–“ã€‚",
                    details: "å‚æ™šå›åˆ°å…­æœ¬æœ¨ï¼Œæ¬£è³è‘—åçš„ã€Œæ«¸å‚é€šã€è–èª•é»ç‡ˆã€‚åœ¨è‰é–“å½Œç”Ÿçš„çœ¼ä¸­ï¼Œé€™äº›å†·ç™½èˆ‡è—è‰²çš„å…‰é»ä¸æ–·å¢æ®–ã€æ“´æ•£ï¼Œç›´åˆ°åæ²’äº†æ•´æ¢è¡—é“èˆ‡è¡Œäººçš„è‡ªæˆ‘ã€‚é€™ä¸æ˜¯æµªæ¼«ï¼Œè€Œæ˜¯ä¸€ç¨®å°æ–¼ã€Œç„¡é™ã€çš„ææ‡¼èˆ‡è¿·æˆ€ã€‚æˆ‘æ˜¯å…‰ï¼Œå…‰æ˜¯æˆ‘ï¼Œæˆ‘å€‘éƒ½æ¶ˆèåœ¨å®‡å®™çš„ç¶²ä¸­ã€‚",
                    locationQuery: "Roppongi Keyakizaka Dori",
                    icon: Camera,
                    style: 'kusama', // Kusama Style
                    weather: { type: 'cloud', current: '8Â°C', high: '10Â°C', low: '6Â°C', loc: 'Roppongi' },
                    keywords: ["æ±äº¬éµå¡”", "ç„¡é™ç¶²", "åœ“é»å¹»è¦º"],
                    outfit: "å…¥å¤œå¾Œæ°£æº«é©Ÿé™ï¼Œæ‰‹å¥—è·Ÿæš–æš–åŒ…é€™æ™‚å€™å°±æ´¾ä¸Šç”¨å ´äº†ã€‚",
                    insights: {
                        travel: "åˆ¥åªæ“ åœ¨å¤©æ©‹ä¸Šï¼èµ°åˆ° Tiffany ç²¾å“åº—å‰çš„è·¯å£ï¼Œç”±ä¸‹å¾€ä¸Šæ‹ï¼Œäººæ½®è¼ƒå°‘ã€‚",
                        local: "ã€Œé€™è£¡å¯æ˜¯æ±äº¬æƒ…ä¾¶çš„ã€æ±ºå‹è–åœ°ã€å•Šï¼ä¸éè–èª•å¤œç•¶å¤©äººå¤šåˆ°åƒè·¨å¹´ã€‚ã€",
                        creative: "ç„¡æ•¸çš„å…‰é»åƒåœ“é»ä¸€æ¨£è¦†è“‹äº†ä¸–ç•Œã€‚ä½ è¢«å…‰åŒ…åœï¼Œç„¡è™•å¯é€ƒï¼Œæœ€å¾Œä½ è‡ªå·±ä¹Ÿè®Šæˆäº†ä¸€å€‹å…‰é»ã€‚",
                        business: "ã€éƒ½å¸‚å†ç”Ÿã€‘å…­æœ¬æœ¨ Hills æ˜¯æ£®å¤§å»ˆé›†åœ˜èŠ±è²» 17 å¹´æ•´åˆ 400 å¤šä½åœ°ä¸»æ‰å®Œæˆçš„ã€Œéƒ½å¸‚å†ç”Ÿã€ä»£è¡¨ä½œã€‚",
                        shopping: "ã€ç¾è¡“é¤¨å•†åº—ã€‘æ£®ç¾è¡“é¤¨ (Mori Art Museum) çš„å•†åº—å¸¸æœ‰è‰é–“å½Œç”Ÿæˆ–æ‘ä¸Šéš†çš„è¯åå•†å“ã€‚"
                    },
                    vocabulary: [
                        { term: "æ°´ç‰", reading: "ã¿ãšãŸã¾", meaning: "åœ“é»", desc: "è‰é–“å½Œç”Ÿå‰µä½œçš„æ ¸å¿ƒå…ƒç´ ã€‚" },
                        { term: "ç„¡é™", reading: "ã‚€ã’ã‚“", meaning: "ç„¡é™", desc: "æ²’æœ‰ç›¡é ­çš„å¢æ®–èˆ‡æ“´æ•£ã€‚" }
                    ]
                    }
                ]
                },
                {
                date: "12/21",
                day: "æ—¥æ›œæ—¥(Sun)",
                title: "æ¹¯ã‘ã‚€ã‚Šã®å½¼æ–¹",
                subtitle: "Beyond the Steam",
                location: "é«˜å´ â†’ è¼•äº•æ¾¤ â†’ è‰æ´¥",
                theme: { main: "text-emerald-800", sub: "text-emerald-600", btn: "bg-emerald-700" },
                events: [
                    { 
                    time: "09:00", 
                    type: "transport", 
                    title: "åŒ—é™¸æ–°å¹¹ç·š", 
                    desc: "ç²¾å¯†è£½ç¨‹çš„ç§»å‹•", 
                    preview: "ç™½è‰²å­å½ˆåŠƒç ´é›ªç©ºï¼Œè’¸æ°£æœªèµ·å…ˆç›´å¥”æ¹¯ç…™å½¼ç«¯ã€‚",
                    details: "System Status: NORMAL. Velocity: 260 km/h. \næ­ä¹˜åŒ—é™¸æ–°å¹¹ç·šå¦‚åŒé€²å…¥ä¸€å€‹å·¨å¤§çš„åŠå°é«”è£½ç¨‹ã€‚æ‰€æœ‰çš„æ™‚é–“è¡¨ç²¾ç¢ºåˆ°ç§’ï¼Œæ‰€æœ‰çš„å‹•ä½œéƒ½è¢«æ¨™æº–åŒ–ã€‚è—ç™½ç›¸é–“çš„è»Šé«”åœ¨è»Œé“ä¸Šæ»‘è¡Œï¼Œæ²’æœ‰å¤šé¤˜çš„éœ‡å‹•ï¼Œæ²’æœ‰èª¤å·®ã€‚é€™æ˜¯æ±äº¬å¨åŠ›ç§‘å‰µ (Tokyo Electron) ç´šåˆ¥çš„ç²¾å¯†ç§»å‹•é«”é©—ã€‚",
                    locationQuery: "Tokyo Station",
                    icon: Train,
                    style: 'tel', // Tokyo Electron Style
                    timetableUrl: "https://www.jreast.co.jp/multi/zh-CHT/",
                    weather: { type: 'sun', current: '10Â°C', high: '12Â°C', low: '7Â°C', loc: 'Tokyo' },
                    keywords: ["Precision", "Efficiency", "Clean"],
                    outfit: "å»ºè­°ç©¿è‘—å‰ªè£ä¿è½çš„æ©Ÿèƒ½æ€§æœè£ã€‚ä¿æŒæ¸…æ½”ï¼Œæ¸›å°‘å¾®å¡µã€‚",
                    insights: {
                        travel: "ä¸Šè»Šå‰å‹™å¿…åœ¨æ±äº¬ç«™è²·ã€Œéµè·¯ä¾¿ç•¶ (Ekiben)ã€ã€‚",
                        local: "ã€Œé«˜å´åœ¨æˆ‘å€‘å°è±¡ä¸­æ˜¯ã€é”ç£¨ä¹‹éƒ½ã€ä¹Ÿæ˜¯ã€éºµé£Ÿä¹‹éƒ½ã€ã€‚ã€",
                        creative: "æ–°å¹¹ç·šè»Šé ­çš„æµç·šå‹è¨­è¨ˆæ˜¯ã€Œä»¿ç”Ÿå­¸ã€çš„ç¶“å…¸æ¡ˆä¾‹ã€‚",
                        business: "ã€ä¾¿ç•¶ç¶“æ¿Ÿå­¸ã€‘JR æ±æ—¥æœ¬çš„éµè·¯ä¾¿ç•¶æ¥­å‹™å¹´ç‡Ÿæ”¶æ•¸ç™¾å„„æ—¥åœ“ã€‚",
                        shopping: "ã€ç‰›è‚‰é“å ´ã€‘å¦‚æœçœ‹åˆ°ã€Œç±³æ²¢ç‰›ã©ã¾ã‚“ä¸­ã€ä¾¿ç•¶ï¼Œè«‹æ¯«ä¸çŒ¶è±«è²·ä¸‹å®ƒã€‚"
                    },
                    vocabulary: [
                        { term: "å®šåˆ»", reading: "ã¦ã„ã“ã", meaning: "æº–é»", desc: "æ—¥æœ¬éµè·¯çš„éˆé­‚ã€‚èª¤å·®é€šå¸¸ä»¥ç§’è¨ˆç®—ã€‚" },
                        { term: "åŠ¹ç‡", reading: "ã“ã†ã‚Šã¤", meaning: "æ•ˆç‡", desc: "åœ¨æœ€çŸ­æ™‚é–“å…§ç§»å‹•æœ€é•·è·é›¢çš„è—è¡“ã€‚" }
                    ],
                    timetable: [{ time: "09:04", label: "Asama 605", highlight: true }, { time: "09:24", label: "Hakutaka 557" }]
                    },
                    { 
                    time: "10:10", 
                    type: "activity", 
                    title: "å°‘æ—å±±é”ç£¨å¯º", 
                    desc: "è¬å»¶å…ƒå¹´çš„æ²ˆé»˜", 
                    preview: "å±±å¯ºéœé»˜èˆ‡é¦™ç«ç¸ˆç¹ï¼Œåœ¨éœ§æ°£è£¡å‘æ¹¯ç…™å½¼æ–¹è¨±é¡˜ã€‚",
                    details: "ã€Œæ­»è€…åœ¨åœ°ä¸‹é•·çœ ï¼Œè€Œç”Ÿè€…åœ¨åœ°ä¸Šç‡ƒç‡’æ…¾æœ›ã€‚ã€å¤§æ±Ÿå¥ä¸‰éƒå¼çš„å­˜åœ¨ä¸»ç¾©ç€°æ¼«åœ¨é€™åº§å¤è€çš„å¯ºå»Ÿä¸­ã€‚ç„¡æ•¸åªæœ‰ä¸€éš»çœ¼ç›çš„é”ç£¨ï¼Œå‡è¦–è‘—è™›ç©ºã€‚é€™è£¡æ˜¯æ…¾æœ›çš„å¢³å ´ï¼Œä¹Ÿæ˜¯å¸Œæœ›çš„èµ·é»ã€‚åœ¨ç¾¤é¦¬çš„å±±æ—ä¸­ï¼Œæˆ‘å€‘èˆ‡è‡ªå·±çš„éˆé­‚å°è©±ã€‚",
                    locationQuery: "Shorinzan Daruma-ji",
                    icon: MapPin,
                    style: 'oe', // Kenzaburo Oe Style
                    weather: { type: 'sun', current: '9Â°C', high: '11Â°C', low: '6Â°C', loc: 'Gunma' },
                    keywords: ["å­˜åœ¨ä¸»ç¾©", "å€‹äººçš„é«”é©—", "éˆé­‚"],
                    outfit: "é€™è£¡è¦çˆ¬é•·é•·çš„éšæ¢¯ï¼ç©¿è‘—æ¨¸ç´ ã€è€ç£¨çš„è¡£ç‰©ï¼Œæº–å‚™å¥½æ¥å—è‚‰é«”çš„å‹å‹•ã€‚",
                    insights: {
                        travel: "è²·é”ç£¨æ™‚ï¼Œçœ‰æ¯›ä»£è¡¨ã€Œé¶´ã€ã€é¬é¬šä»£è¡¨ã€Œé¾œã€ã€‚è¨±é¡˜æ™‚å…ˆç•«ä¸Šã€Œå·¦çœ¼ã€ã€‚",
                        creative: "é”ç£¨ä¸å€’ç¿çš„è¨­è¨ˆé‡å¿ƒåœ¨åº•éƒ¨ï¼Œè±¡å¾µã€Œä¸ƒè½‰å…«èµ·ã€çš„éŸŒæ€§ç²¾ç¥ã€‚",
                        business: "ã€å‹é‹å£Ÿæ–·ã€‘é«˜å´å¸‚ç”Ÿç”¢äº†å…¨æ—¥æœ¬ 80% çš„é”ç£¨ã€‚",
                        politics: "ã€ç¸½ç†ç”¢åœ°ã€‘ç¾¤é¦¬ç¸£è¢«ç¨±ç‚ºã€Œä¿å®ˆç‹åœ‹ã€ï¼Œå‡ºäº†å¤šä½è‡ªæ°‘é»¨é¦–ç›¸ã€‚é”ç£¨å› æ­¤æˆç‚ºæ—¥æœ¬æ”¿å£‡ã€Œå¿…å‹ã€çš„æ–‡åŒ–ç¬¦è™Ÿã€‚",
                        shopping: "ã€è‰²å½©å­¸ã€‘ç´…è‰²æ˜¯åŸºæœ¬æ¬¾ï¼Œé‡‘è‰²æ±‚è²¡é‹ï¼Œé»‘è‰²æ“‹ç…ï¼Œç²‰è‰²æ±‚æˆ€æ„›ã€‚"
                    },
                    vocabulary: [
                        { term: "å®Ÿå­˜", reading: "ã˜ã¤ãã‚“", meaning: "å­˜åœ¨", desc: "äººå­˜åœ¨çš„æ„ç¾©èˆ‡æœ¬è³ªã€‚" },
                        { term: "æ²ˆé»™", reading: "ã¡ã‚“ã‚‚ã", meaning: "æ²ˆé»˜", desc: "é¢å°å·¨å¤§çš„æ­·å²èˆ‡è‡ªç„¶æ™‚çš„ç„¡èªã€‚" }
                    ]
                    },
                    { 
                    time: "15:30", 
                    type: "transport", 
                    title: "è‰è¼•äº¤é€šå·´å£«", 
                    desc: "é¾è²“å…¬è»Šçš„æ£®æ—ä¹‹æ—…", 
                    preview: "æ£®æ—éš§é“ä¸­çš„å·´å£«ç©¿æ¢­ï¼Œçª—å¤–éœ§ç™½é å‘Šå³å°‡æŠµé”æº«æ³‰ã€‚",
                    details: "å¾è¼•äº•æ¾¤æ­ä¹˜å·´å£«å‰å¾€è‰æ´¥æº«æ³‰ã€‚é€™æ®µè·¯ç¨‹æœƒç©¿è¶ŠèŒ‚å¯†çš„æ£®æ—èˆ‡èœ¿èœ’çš„å±±è·¯ï¼Œå½·å½¿é€²å…¥äº†å‰åœåŠ›çš„ä¸–ç•Œã€‚çª—å¤–çš„æ™¯è‰²å¾åˆ¥å¢…å€é€æ¼¸è®ŠæˆåŸå§‹çš„é›ªåœ‹æ£®æ—ï¼Œæˆ–è¨±åœ¨æŸå€‹è½‰å½è™•ï¼Œä½ æœƒçœ‹è¦‹é¾è²“åœ¨æ¨¹æ¢¢ä¸Šç­‰è»Šã€‚é€™æ˜¯ä¸€æ®µé—œæ–¼é„‰æ„èˆ‡è‡ªç„¶çš„æ—…ç¨‹ã€‚",
                    locationQuery: "Karuizawa Station",
                    icon: Train,
                    style: 'ghibli', // Ghibli Style
                    timetableUrl: "https://www.kkKG.co.jp/bus/rosen-bus.html",
                    weather: { type: 'snow', current: '1Â°C', high: '3Â°C', low: '0Â°C', loc: 'Karuizawa' },
                    keywords: ["æ£®æ—éš§é“", "é›ªä¹‹åœ‹åº¦", "æ‡·èˆŠæ—…ç¨‹"],
                    outfit: "è»Šç¨‹ 80 åˆ†é˜å±±è·¯ï¼Œæ€•æšˆè»Šçš„å»ºè­°ç©¿å¯¬é¬†ä¸å‹’è‚šå­çš„è¤²å­ã€‚",
                    insights: {
                        travel: "å±±è·¯èœ¿èœ’ 80 åˆ†é˜ï¼Œå®¹æ˜“æšˆè»Šçš„äººå‹™å¿…åå‰æ’ä¸¦å…ˆåƒè—¥ã€‚",
                        local: "ã€Œé€™æ¢è·¯çœŸçš„æ˜¯ã€æšˆè»Šåœ°ç„ã€ã€‚ä¸éä¸‹é›ªçš„æ™‚å€™ï¼Œçœ‹è‘—çª—å¤–ç™½èŒ«èŒ«çš„æ£®æ—å¾ˆç¾ã€‚ã€",
                        creative: "å·´å£«åœ¨æ£®æ—ä¸­ç©¿æ¢­ï¼Œå…‰å½±é€éæ¨¹è‘‰ç‘åœ¨è»Šçª—ä¸Šï¼Œæ¯ä¸€å¹€éƒ½åƒæ˜¯æ‰‹ç¹ªçš„æ°´å½©èƒŒæ™¯ç•«ã€‚é€™è£¡æ²’æœ‰å£äººï¼Œåªæœ‰å¤§è‡ªç„¶çš„é­”æ³•ã€‚",
                        business: "ã€è™§æè£œè²¼ã€‘é€™é¡å±±å€è·¯ç·šé€šå¸¸é›£ä»¥ç›ˆåˆ©ï¼Œå¾€å¾€ä»°è³´åœ°æ–¹æ”¿åºœè£œè²¼ã€‚",
                        history: "ã€è¼•äº•æ¾¤éµé“ã€‘é€™æ¢è·¯ä»¥å‰å…¶å¯¦æ˜¯æœ‰ç«è»Šçš„ï¼ˆè‰è¼•é›»æ°£éµé“ï¼‰ï¼Œå¾Œä¾†å› ç‚ºé¢±é¢¨ç ´å£èˆ‡æ±½è»Šæ™®åŠè€Œå»¢ç·šã€‚",
                        shopping: "ã€ç‰›å¥¶ã€‘ä¸­é€”å¦‚æœåœã€ŒåŒ—è¼•äº•æ¾¤ã€ä¼‘æ¯ç«™ï¼Œè«‹å‹™å¿…è²·ç•¶åœ°çš„ç‰›å¥¶æˆ–å„ªé…ªä¹³ã€‚"
                    },
                    timetable: [{ time: "14:20", label: "è‰è¼•äº¤é€š" }, { time: "15:40", label: "è‰è¼•äº¤é€š", highlight: true }]
                    },
                    { 
                    time: "17:00", 
                    type: "hotel", 
                    title: "Hotel Ichii ä¸€äº•", 
                    desc: "ç¥éš±å°‘å¥³çš„æ¹¯å±‹", 
                    preview: "æ¹¯ç•‘è’¸æ°£ç•¶ä½œé–€ç°¾ï¼Œè¸é€²æ—…é¤¨å°±åƒç©¿è¶Šä¸€å±¤æº«æš–çš„éœ§ã€‚",
                    price: "$6681", 
                    details: "æ­¡è¿ä¾†åˆ°æ²¹å±‹ï¼é€™åº§ä½æ–¼æ¹¯ç•‘æ­£å‰æ–¹çš„è€ç‰Œæ—…é¤¨ï¼Œå¤œæ™šç‡ˆç«é€šæ˜æ™‚ï¼Œå½·å½¿é€šå¾€ç¥éˆä¸–ç•Œçš„å…¥å£ã€‚ç´…è‰²çš„æ©‹æ¨‘ã€å‡é¨°çš„ç™½ç…™ã€ç©¿è‘—æµ´è¡£ç©¿æ¢­çš„äººç¾¤ï¼Œé€™è£¡ä¸æ˜¯è‰æ´¥ï¼Œé€™è£¡æ˜¯åƒå°‹è¿·è·¯çš„é‚£å€‹ä¸–ç•Œã€‚åˆ¥å¿˜äº†å‘¼å¸ï¼Œéæ©‹æ™‚è¦æ†‹æ°£å–”ï¼Œä¸ç„¶æœƒè¢«æ¹¯å©†å©†ç™¼ç¾ã€‚",
                    locationQuery: "Kusatsu Onsen Hotel Ichii",
                    icon: Hotel,
                    style: 'spirited', // Spirited Away Style
                    timetableUrl: "https://www.kkKG.co.jp/bus/rosen-bus.html",
                    weather: { type: 'snow', current: '-2Â°C', high: '1Â°C', low: '-5Â°C', loc: 'Kusatsu' },
                    keywords: ["åƒèˆ‡åƒå°‹", "æ¹¯å©†å©†", "ä¸å¯æ€è­°"],
                    outfit: "æ™šä¸Šçœ‹æ¹¯ç•‘é»ç‡ˆã€è¶…ç´šå†·ã€ï¼Œé«”æ„Ÿé€šå¸¸åœ¨é›¶ä¸‹ã€‚å‹™å¿…å…¨å‰¯æ­¦è£ã€‚",
                    insights: {
                        travel: "è‰æ´¥æº«æ³‰æ˜¯å¼·é…¸æ€§ï¼Œæ®ºèŒåŠ›å¼·ä½†å°çš®è†šåˆºæ¿€å¤§ã€‚**éŠ€é£¾å“åƒè¬åˆ¥æˆ´ä¸‹æ°´**ã€‚",
                        local: "ã€Œè‰æ´¥çš„æ°´çœŸçš„å¾ˆã€åˆ©ã€ï¼çš®è†šæ•æ„Ÿçš„äººå¯èƒ½æœƒç™¢ã€‚ã€",
                        trap: "åœ¨é€™è£¡å¦‚æœä¸å·¥ä½œï¼Œå°±æœƒè¢«æ¹¯å©†å©†è®Šæˆå‹•ç‰©...å•Šä¸ï¼Œæ˜¯å¦‚æœä¸æ³¡æ¹¯ï¼Œå°±ç™½ä¾†äº†ã€‚",
                        creative: "æ¹¯ç•‘æ¹§å‡ºçš„è’¸æ°£åœ¨å¤œé–“é»ç‡ˆä¸‹ï¼Œå½¢æˆåƒè®Šè¬åŒ–çš„é›²éœ§å…‰å½±ç§€ã€‚",
                        business: "ã€No.1 å“ç‰Œå­¸ã€‘è‰æ´¥é€£çºŒ 19 å¹´èŸ¬è¯ã€Œæ—¥æœ¬æº«æ³‰ 100 é¸ã€ç¬¬ä¸€åã€‚",
                        shopping: "ã€æ¹¯ä¹‹èŠ±ã€‘è‰æ´¥åç”¢ã€Œæ¹¯ä¹‹èŠ±ã€æ˜¯æº«æ³‰çµæ™¶ç²‰ï¼Œå›å®¶æ³¡æ¾¡å°±åƒåœ¨è‰æ´¥ä¸€æ¨£ã€‚"
                    },
                    vocabulary: [
                        { term: "æ¹¯ç•‘", reading: "ã‚†ã°ãŸã‘", meaning: "ç†±æ°´ç”°", desc: "æŒ‡åˆ©ç”¨åƒç”°åœ°ä¸€æ¨£çš„æœ¨æ§½ï¼Œè®“æ»¾ç‡™çš„æ³‰æ°´è‡ªç„¶é™æº«ã€‚" },
                        { term: "åƒå°‹", reading: "ã¡ã²ã‚", meaning: "åƒå°‹", desc: "å°‹æ‰¾åå­—èˆ‡å›å®¶çš„è·¯ã€‚" }
                    ]
                    }
                ]
                },
                {
                date: "12/22",
                day: "æœˆæ›œæ—¥(Mon)",
                title: "æ¸¯ã®ç‰©èª",
                subtitle: "Tale of the Port",
                location: "è‰æ´¥ â†’ è¼•äº•æ¾¤ â†’ æ©«æ¿±",
                theme: { main: "text-purple-900", sub: "text-purple-600", btn: "bg-purple-700" },
                events: [
                    { 
                    time: "11:30", 
                    type: "shop", 
                    title: "è¼•äº•æ¾¤ç‹å­ Outlet", 
                    desc: "ä¸€å¡Šå¸ƒçš„å¹¾ä½•ç¾å­¸", 
                    preview: "é«˜åŸå†·é¢¨ä¸­çš„è³¼ç‰©å¤§é“ï¼Œå±±æ—è½‰å‘æ¸¯å£å‰çš„è£œçµ¦ç«™ã€‚",
                    details: "åœ¨é€™ç‰‡é«˜åŸä¸Šçš„è³¼ç‰©å»£å ´ï¼Œæˆ‘å€‘ä¸è«‡æµè¡Œï¼Œè«‡çµæ§‹ã€‚è¼•äº•æ¾¤ç‹å­ Outlet çš„ç©ºé–“è¨­è¨ˆå¦‚åŒä¸‰å®…ä¸€ç”Ÿ (Issey Miyake) çš„ã€Œä¸€å¡Šå¸ƒ (A Piece of Cloth)ã€å“²å­¸ï¼Œåˆ©ç”¨è‡ªç„¶çš„æ‘ºç–Šèˆ‡å»¶å±•ï¼Œå‰µé€ å‡ºèˆ‡ç’°å¢ƒå…±ç”Ÿçš„å•†æ¥­ç©ºé–“ã€‚åœ¨é€™è£¡è³¼ç‰©ï¼Œæ˜¯å°ç”Ÿæ´»å‹æ…‹çš„å¹¾ä½•è§£æ§‹ã€‚",
                    locationQuery: "Karuizawa Prince Shopping Plaza",
                    icon: ShoppingBag,
                    style: 'miyake', // Miyake Style
                    weather: { type: 'cloud', current: '3Â°C', high: '6Â°C', low: '0Â°C', loc: 'Karuizawa' },
                    keywords: ["å¹¾ä½•çµæ§‹", "PLEATS PLEASE", "ç©ºé–“å“²å­¸"],
                    outfit: "é€™ Outlet å¾ˆå¤§ä¸”æ˜¯æˆ¶å¤–é–‹æ”¾å¼ï¼Œé¢¨å¾ˆå¤§ã€‚å»ºè­°ç©¿é˜²é¢¨å¤§è¡£ã€‚",
                    insights: {
                        travel: "åˆ¥åªé¡§è‘—é€›è¡—ï¼Œä¸­é–“çš„å¤§æ¹–æ™¯è‰²ç¾åˆ°åƒé¢¨æ™¯å€ã€‚é€™è£¡çš„ Gucci å’Œ Nike åº«å­˜é€šå¸¸æ¯”å¸‚å€å¤šã€‚",
                        local: "ã€Œè¼•äº•æ¾¤ Outlet å°æˆ‘å€‘ä¾†èªªå…¶å¯¦æ˜¯å¤§å…¬åœ’ã€‚å¾ˆå¤šé•·é‡ç¸£æ°‘é€±æœ«æœƒå…¨å®¶é–‹è»Šä¾†é€™è£¡æºœç‹—ã€‚ã€",
                        trap: "Outlet ç¾é£Ÿè¡—ä¸­åˆ 12:00-13:30 æ˜¯å°–å³°æ™‚åˆ»ã€‚å»ºè­° 11:30 å‰å°±å…ˆåƒåˆé¤ã€‚",
                        creative: "é€™è£¡çš„å»ºç¯‰ç·šæ¢ä¿è½ï¼Œèˆ‡å‘¨åœçš„è‡ªç„¶æ™¯è§€å½¢æˆå°æ¯”ã€‚å°±åƒä¸‰å®…ä¸€ç”Ÿçš„çšºè¤¶ï¼Œçœ‹ä¼¼ç°¡å–®ï¼Œå¯¦å‰‡ç¶“éç²¾å¯†çš„æ•¸å­¸è¨ˆç®—ã€‚",
                        business: "ã€æ·¡å­£å¹³è¡¡è¡“ã€‘è¥¿æ­¦é›†åœ˜é€é Outlet æˆåŠŸå°‡å¤å­£é¿æš‘åœ°çš„æ·¡å­£ä¹Ÿè½‰åŒ–ç‚ºè³¼ç‰©æ—ºå­£ã€‚",
                        shopping: "ã€BAO BAOã€‘ä¸‰å®…ä¸€ç”Ÿçš„ BAO BAO åŒ…åœ¨é€™è£¡å¶çˆ¾æœƒæœ‰æŠ˜æ‰£æ¬¾ï¼Œé‚£æ˜¯çµæ§‹ä¸»ç¾©çš„éš¨èº«è—è¡“å“ã€‚"
                    },
                    vocabulary: [
                        { term: "å…ç¨", reading: "ã‚ã‚“ãœã„", meaning: "å…ç¨…", desc: "è¨˜å¾—éš¨èº«æ”œå¸¶è­·ç…§ã€‚" },
                        { term: "è©¦ç€", reading: "ã—ã¡ã‚ƒã", meaning: "è©¦ç©¿", desc: "è¦è©¦ç©¿å‰è«‹å…ˆè·Ÿåº—å“¡èªªã€ŒShichaku OK?ã€ã€‚é€²æ›´è¡£å®¤è«‹è„«é‹ã€‚" }
                    ]
                    },
                    { 
                    time: "14:52", 
                    type: "transport", 
                    title: "å‰å¾€æ©«æ¿±", 
                    desc: "åœ‹å®¶æˆ°ç•¥ç§»å‹•", 
                    preview: "åˆ—è»Šè¶Šéå±±èˆ‡æµ·ï¼ŒæŠŠè¡Œæå’Œå¿ƒæ„é€é€²æ¸¯å£æ•…äº‹çš„é–‹é ­ã€‚",
                    details: "é€™ä¸æ˜¯å–®ç´”çš„ç§»å‹•ï¼Œé€™æ˜¯ã€Œåœ‹å®¶æˆ°ç•¥ã€ç­‰ç´šçš„éƒ¨ç½²ã€‚å¾é«˜å±±åˆ°æµ·æ¸¯ï¼Œæˆ‘å€‘éœ€è¦çš„æ˜¯é€Ÿåº¦ã€ç´€å¾‹èˆ‡æ±ºæ–·ã€‚Sanae Takaichi (é«˜å¸‚æ—©è‹—) é¢¨æ ¼çš„å¼·ç¡¬èˆ‡ç²¾æº–ï¼Œé«”ç¾åœ¨é€™æ®µæ–°å¹¹ç·šèˆ‡é›»è»Šçš„è½‰ä¹˜ä¸­ã€‚æ²’æœ‰ä»»ä½•ä¸€ç§’é˜æ˜¯å¯ä»¥è¢«æµªè²»çš„ï¼Œç›®æ¨™åªæœ‰ä¸€å€‹ï¼šæ©«æ¿±ã€‚",
                    locationQuery: "Karuizawa Station",
                    icon: Train,
                    style: 'sanae', // Sanae Takaichi Style
                    weather: { type: 'cloud', current: '10Â°C', high: '12Â°C', low: '8Â°C', loc: 'Yokohama' },
                    keywords: ["åœ‹å®¶å®‰å…¨", "ç¶“æ¿Ÿå®‰ä¿", "éµå¨˜å­"],
                    outfit: "å»ºè­°ç©¿è‘—æ·±è—è‰²æˆ–é»‘è‰²å¥—è£ï¼Œå±•ç¾å°ˆæ¥­èˆ‡æ¬Šå¨æ„Ÿã€‚",
                    insights: {
                        travel: "é€±æ—¥ä¸‹åˆå›æ±äº¬çš„æ–°å¹¹ç·šè‡ªç”±å¸­æ˜¯æˆ°å ´ï¼è‹¥æ²’è²·æŒ‡å®šå¸­ï¼Œè«‹å‹™å¿…ææ—© 20 åˆ†é˜å»æœˆå°æ’éšŠã€‚",
                        local: "ã€Œé€™æ¢è·¯ç·šä¸€æ¬¡é«”é©—äº†ã€å±±ã€èˆ‡ã€æµ·ã€ã€‚æ©«æ¿±äººå…¶å¯¦å¾ˆè‡ªè±ªï¼Œè¦ºå¾—è‡ªå·±æ¯”æ±äº¬æ›´æ´‹æ°£ã€‚ã€",
                        creative: "å¾è»Šçª—çœ‹å‡ºå»ï¼Œæ™¯è‰²å¾é›ªå±±éæ¸¡åˆ°æ··å‡åœŸå¢æ—ï¼Œå†åˆ°æ©«æ¿±çš„é–‹é—Šæµ·æ¸¯ã€‚",
                        business: "ã€é€šå‹¤æ–°å¹¹ç·šã€‘é€™æ¢è·¯ç·šæ”¯æ’äº†ã€Œæ–°å¹¹ç·šé€šå‹¤æ—ã€çš„ç”Ÿæ´»æ–¹å¼ã€‚",
                        history: "ã€æ—¥æœ¬ç¬¬ä¸€æ¢éµè·¯ã€‘æ©«æ¿±åˆ°æ±äº¬çš„æ–°æ©‹æ˜¯æ—¥æœ¬ç¬¬ä¸€æ¢éµè·¯é–‹é€šçš„è·¯æ®µï¼ˆ1872å¹´ï¼‰ã€‚",
                        shopping: "ã€å´é™½è»’ã€‘åˆ°äº†æ©«æ¿±ç«™ï¼Œä¸€å®šè¦è²·ã€Œå´é™½è»’ (Kiyoken)ã€çš„ç‡’è³£ä¾¿ç•¶ã€‚"
                    },
                    timetable: [{ time: "14:55", label: "Asama 618", highlight: true }]
                    },
                    { 
                    time: "18:00", 
                    type: "activity", 
                    title: "æ©«æ¿±ç´…ç£šå€‰åº«", 
                    desc: "å¤§èˆªæµ·æ™‚ä»£çš„å†’éšª", 
                    preview: "å¤•é™½æ˜ ç´…ç£šï¼Œæµ·é¢¨ç¿»é ï¼Œæ¸¯å£ç‰©èªåœ¨æ­¤å±•é–‹ã€‚",
                    details: "æƒ³è¦æˆ‘çš„è²¡å¯¶å—ï¼Ÿæƒ³è¦çš„è©±å¯ä»¥å…¨éƒ¨çµ¦ä½ ï¼å‚æ™šæŠµé”æ©«æ¿±ç´…ç£šå€‰åº«ï¼Œé€™è£¡æ›¾æ˜¯æ—¥æœ¬é€šå¾€ä¸–ç•Œçš„é–€æˆ¶ã€‚ç´…ç£šç‰†ä¸Šç•™ä¸‹çš„æ–‘é§ç—•è·¡ï¼Œæ˜¯ç„¡æ•¸æ°´æ‰‹èˆ‡è²¨ç‰©çš„è¨˜æ†¶ã€‚åœ¨æµ·é¢¨ä¸­ï¼Œå½·å½¿èƒ½è½åˆ°æµ·è³Šç‹çš„è™Ÿè§’è²ã€‚é€™ä¸æ˜¯æ™®é€šçš„å€‰åº«ï¼Œé€™æ˜¯å†’éšªçš„èµ·é»ï¼",
                    locationQuery: "Yokohama Red Brick Warehouse",
                    icon: Camera,
                    style: 'onepiece', // One Piece Style
                    weather: { type: 'sun', current: '8Â°C', high: '11Â°C', low: '5Â°C', loc: 'Yokohama' },
                    keywords: ["å‰å¤§çš„èˆªé“", "æµ·è³Šç‹", "ç´…ç£šè¦å¡"],
                    outfit: "æµ·é‚Šçš„é¢¨æ˜¯ã€æœƒå¹åˆ°é ­ç—›ã€çš„é‚£ç¨®ã€‚ä¸€å®šè¦æˆ´èƒ½è“‹ä½è€³æœµçš„å¸½å­ã€‚",
                    insights: {
                        travel: "ç´…ç£šå€‰åº«çš„åœ°é¢æ˜¯ç™¾å¹´æ­·å²çš„ç¡¬çŸ³æ¿è·¯ï¼Œæ¨è¡Œæç®±æœƒéœ‡åˆ°æ‰‹éº»ã€‚åƒè¬å…ˆæŠŠè¡Œæå¯„æ”¾ã€‚",
                        local: "ã€Œæ©«æ¿±äººå¾ˆæ„›ç´…ç£šå€‰åº«ï¼Œä½†ä¹Ÿè¦ºå¾—é‚£æ˜¯ã€çµ¦è§€å…‰å®¢å»çš„ã€ã€‚ä¸éè–èª•ç¯€ä¾‹å¤–ï¼Œé‚£ç¨®æ°£æ°›çœŸçš„ç„¡æ•µã€‚ã€",
                        trap: "è–èª•å¸‚é›†å…¥å ´é€šå¸¸éœ€è¦è²·ç¥¨ã€‚å¦‚æœä¸æƒ³æ’éšŠè²·ç¥¨ï¼Œå…¶å¯¦å€‰åº«å¤–åœçš„å…è²»å€åŸŸå°±å¾ˆç¾äº†ã€‚",
                        creative: "ç´…ç£šçš„è³ªæ„Ÿåƒæ˜¯ç¶“æ­·éç„¡æ•¸æˆ°å½¹çš„èˆ¹èº«ï¼Œå …å›ºè€Œå……æ»¿æ•…äº‹ã€‚å¤œæ™šçš„ç‡ˆå…‰æ‰“åœ¨ç‰†é¢ä¸Šï¼Œå¦‚åŒå°‹å¯¶åœ–ä¸Šçš„æŒ‡å¼•ã€‚",
                        business: "ã€å¤è¹Ÿæ´»åŒ–ã€‘æ©«æ¿±å¸‚å°‡ç´…ç£šå€‰åº«å¾å»¢æ£„ç‰©æµè¨­æ–½è½‰å‹ç‚ºæ–‡åŒ–å•†æ¥­åœ°æ¨™ã€‚",
                        politics: "ã€ç¾è»åŸºåœ°ã€‘æ©«æ¿±æ¸¯ä¸åƒ…æ˜¯å•†æ¥­æ¸¯ï¼Œä¹Ÿæ˜¯ç¾è»è¨­æ–½ï¼ˆNorth Dockï¼‰çš„æ‰€åœ¨åœ°ã€‚",
                        shopping: "ã€ç´…é‹å·§å…‹åŠ›ã€‘æ©«æ¿±æœ‰åè¬ ã€Œç©¿ç´…é‹çš„å¥³å­©ã€ï¼Œé€™è£¡è³£çš„ã€Œç´…è‰²é«˜è·Ÿé‹å·§å…‹åŠ›ã€éå¸¸ç²¾ç·»å¯æ„›ã€‚"
                    }
                    }
                ]
                },
                {
                date: "12/23",
                day: "ç«æ›œæ—¥(Tue)",
                title: "æ€ã„å‡ºã‚’è©°ã‚ãŸå¸°è·¯",
                subtitle: "Homeward Bound with Memories",
                location: "æ©«æ¿± â†’ æˆç”° â†’ å°åŒ—",
                theme: { main: "text-sky-800", sub: "text-sky-600", btn: "bg-sky-700" },
                events: [
                    { 
                    time: "11:10", 
                    type: "food", 
                    title: "æ–°æ©«æ¿±æ‹‰éºµåšç‰©é¤¨", 
                    desc: "æ˜­å’Œæ™‚ä»£çš„è™Ÿå¤–", 
                    preview: "æ˜­å’Œè¡—æ™¯çš„æœ€å¾Œä¸€ç¢—ï¼ŒæŠŠå›ç¨‹çš„è¨˜æ†¶ç››é€²æ¹¯è£¡ã€‚",
                    details: "è™Ÿå¤–ï¼è™Ÿå¤–ï¼æ™‚ç©ºéš§é“ç™¼ç¾ç¢ºèªã€‚ä½æ–¼æ–°æ©«æ¿±çš„æ‹‰éºµåšç‰©é¤¨ï¼Œå·²ç¢ºèªç‚ºé€šå¾€æ˜­å’Œ33å¹´çš„å…¥å£ã€‚å¤•é™½æ°¸é æ‡¸æ›åœ¨å¤©é‚Šï¼Œè¡—è§’çš„ç…™è‰åº—å‚³ä¾†æ”¶éŸ³æ©Ÿçš„é›œè¨Šï¼Œç†±é¨°é¨°çš„æ‹‰éºµé¦™æ°£æ˜¯é€™å€‹ä¸–ç•Œå”¯ä¸€çš„çœŸå¯¦ã€‚è«‹æ‰€æœ‰æ™‚ç©ºæ—…äººç›¡æƒ…äº«å—é€™æœ€å¾Œçš„æ‡·èˆŠæ™‚åˆ»ã€‚",
                    locationQuery: "Shin-Yokohama Ramen Museum",
                    icon: Utensils,
                    style: 'retro', // Retro Style
                    weather: { type: 'rain', current: '8Â°C', high: '10Â°C', low: '7Â°C', loc: 'Yokohama' },
                    keywords: ["æ˜­å’Œå¤•é™½", "è¿·ä½ ç¢—", "åˆ¶éœ¸å…¨åœ‹"],
                    outfit: "å®¤å…§å¾©å¤é€ æ™¯æº«æš–ï¼Œç©¿è„«æ–¹ä¾¿çš„æ´‹è”¥å¼ç©¿æ­ï¼Œé¿å…å¤ªåšé‡åœ¨å®¤å…§ç†±å£ã€‚",
                    insights: {
                        travel: "ä¸€å®šè¦é»ã€Œè¿·ä½ ç¢— (Mini Size)ã€ï¼é€™è£¡é›†çµäº†å…¨æ—¥æœ¬ååº—ï¼Œè¿·ä½ ç¢—è®“ä½ ä¸€æ¬¡èƒ½åƒä¸‰å®¶ä¸åŒå£å‘³è€Œä¸æ’æ­»ã€‚",
                        local: "ã€Œæ–°æ©«æ¿±å…¶å¯¦æ˜¯å€‹é™¤äº†æ–°å¹¹ç·šå’Œé«”è‚²é¤¨ä»€éº¼éƒ½æ²’æœ‰çš„åœ°æ–¹ï¼ˆç¬‘ï¼‰ã€‚ä½†æ‹‰éºµåšç‰©é¤¨çœŸçš„å¾ˆå¼·ã€‚ã€",
                        trap: "åšç‰©é¤¨å…§æ¨“æ¢¯å¾ˆå¤šä¸”èµ°é“ç‹¹çª„ï¼Œå¦‚æœæœ‰å¤§è¡Œæç®±ï¼Œå‹™å¿…å¯„æ”¾åœ¨å…¥å£è™•æˆ–è»Šç«™ï¼Œåƒè¬åˆ¥æ‹–é€²å»ã€‚",
                        creative: "é€™è£¡çš„å°åˆ·å“ã€æ‹›ç‰Œå­—é«”éƒ½æœ‰è‘—æ˜­å’Œæ™‚ä»£ç‰¹æœ‰çš„ã€Œæ‰‹å¯«æ„Ÿã€èˆ‡ã€Œå¢¨æšˆæ„Ÿã€ã€‚é‚£ç¨®ä¸å®Œç¾çš„ç²—ç³™ï¼Œæ­£æ˜¯æº«åº¦çš„ä¾†æºã€‚",
                        business: "ã€IPç¶“æ¿Ÿã€‘æ‹‰éºµåšç‰©é¤¨é–‹å‰µäº†ã€Œé£Ÿç‰©ä¸»é¡Œæ¨‚åœ’ã€æ¨¡å¼ï¼Œè­‰æ˜äº†å³ä½¿æ˜¯ä½å–®åƒ¹çš„åº¶æ°‘ç¾é£Ÿï¼Œé€éç­–å±•èˆ‡é«”é©—åŒ…è£ï¼Œä¹Ÿèƒ½å‰µé€ é«˜é™„åŠ åƒ¹å€¼çš„è§€å…‰æ”¶å…¥ã€‚",
                        shopping: "ã€è‡ªè£½æ‹‰éºµã€‘ä¸€æ¨“å•†åº—å¯ä»¥è²·åˆ°å„å®¶ååº—çš„æ‹‰éºµèª¿ç†åŒ…ï¼Œç”šè‡³å¯ä»¥è‡ªå·±çµ„åˆéºµæ¢èˆ‡æ¹¯é ­ï¼Œåšå‡ºç¨ä¸€ç„¡äºŒçš„ä¼´æ‰‹ç¦®ã€‚"
                    },
                    vocabulary: [
                        { term: "æ›¿ç‰", reading: "ã‹ãˆã ã¾", meaning: "åŠ éºµ", desc: "åšå¤šæ‹‰éºµç‰¹æœ‰çš„æ–‡åŒ–ã€‚æ¹¯è¦ç•™è‘—ï¼ŒåªåŠ éºµæ¢ã€‚" },
                        { term: "é»„æ˜", reading: "ãŸããŒã‚Œ", meaning: "é»ƒæ˜", desc: "é¤¨å…§æ°¸é åœç•™åœ¨é€™ä¸€åˆ»ï¼Œè±¡å¾µè‘—é€¢é­”æ™‚åˆ»çš„ç¥ç§˜æ„Ÿã€‚" }
                    ]
                    },
                    { 
                    time: "14:28", 
                    type: "transport", 
                    title: "å‰å¾€æ©Ÿå ´", 
                    desc: "æ±äº¬éƒ½åŒæƒ…å¡”", 
                    preview: "åˆ—è»Šæ»‘å‘è·‘é“ï¼Œæ‰€æœ‰å›æ†¶è¢«å¦¥å–„æ‰“åŒ…æº–å‚™èµ·é£›ã€‚",
                    details: "Sympathy Tower / Terminal Connection... Initiating. \næ©Ÿå ´ä¸åªæ˜¯äº¤é€šæ¨ç´ï¼Œå®ƒæ˜¯ç¾ä»£ç¤¾æœƒçš„ã€ŒåŒæƒ…å¡”ã€ã€‚å·¨å¤§çš„æµç·šå‹å»ºç¯‰å¦‚åŒ Zaha Hadid çš„æœªå¯¦ç¾è—åœ–ï¼Œåœ¨é€™è£¡ï¼Œæ‰€æœ‰çš„æ‚²æ­¡é›¢åˆéƒ½è¢« AI æ¼”ç®—æ³•æº«æŸ”åœ°åŒ…è¦†ã€‚æˆ‘å€‘æ˜¯æ•¸æ“šæµä¸­çš„ç²’å­ï¼Œæ­£æº–å‚™è¢«å‚³é€å›åŸé»ã€‚",
                    locationQuery: "Narita Airport Terminal 1",
                    icon: Train,
                    style: 'sympathy', // Tokyo Sympathy Tower Style
                    timetableUrl: "https://www.jreast.co.jp/nex/time.html",
                    weather: { type: 'rain', current: '7Â°C', high: '9Â°C', low: '5Â°C', loc: 'Tokyo' },
                    keywords: ["æº–é»", "ç›´é”", "è£œçœ "],
                    outfit: "è¼•é¬†èˆ’é©ç‚ºä¸»ï¼Œé¿å…ç©¿å¤ªå¤šå±¤ï¼Œæ©Ÿå ´éå®‰æª¢è„«è„«ç©¿ç©¿å¾ˆéº»ç…©ã€‚",
                    insights: {
                        travel: "æ©«æ¿±ç«™è¿·å®®ç­‰ç´šå¾ˆé«˜ï¼Œè«‹é ç•™ 15 åˆ†é˜æ‰¾æœˆå°ã€‚è»Šä¸Šæœ‰å¤§å‹è¡Œæé–ï¼Œè¨˜å¾—è¨­ç°¡å–®çš„å¯†ç¢¼ã€‚",
                        trap: "æ©«æ¿±ç«™çš„ N'EX æœˆå°è·Ÿä¸€èˆ¬é›»è»Šæœˆå°æ˜¯åŒä¸€å€‹ï¼Œä½†åœé ä½ç½®å¯èƒ½ä¸åŒã€‚è«‹çœ‹é›»å­è·‘é¦¬ç‡ˆã€‚",
                        creative: "æµç·šå‹çš„å»ºç¯‰ç·šæ¢è±¡å¾µè‘—ç„¡é˜»åŠ›çš„æœªä¾†ã€‚åœ¨é€™è£¡ï¼Œèªè¨€è¢«ç°¡åŒ–ç‚ºåœ–æ¨™ï¼Œæƒ…æ„Ÿè¢«è½‰åŒ–ç‚ºç™»æ©Ÿé–€çš„é–‹é—”ã€‚",
                        business: "ã€æ©Ÿå ´è¯å¤–ç«¶çˆ­ã€‘N'EX é›–ç„¶é€Ÿåº¦è¼¸çµ¦äº¬æˆ Skylinerï¼Œä½†æ†‘è—‰è‘— JR é¾å¤§çš„è·¯ç¶²ï¼Œä¾ç„¶æŒæ¡äº†é‡è¦–ã€Œä¸€è»Šç›´é”ã€çš„å•†å‹™èˆ‡å®¶åº­å®¢ç¾¤ã€‚",
                        shopping: "ã€æœ€å¾Œè£œçµ¦ã€‘å¦‚æœé‚„æ²’è²·å¤ ï¼Œæ©«æ¿±ç«™çš„ JOINUS åœ°ä¸‹è¡—æˆ–é«˜å³¶å±‹ç™¾è²¨æ˜¯æœ€å¾Œè¡åˆºçš„å¥½åœ°æ–¹ï¼Œæ¯”æ©Ÿå ´é¸æ“‡æ›´å¤šã€‚"
                    },
                    timetable: [{ time: "14:29", label: "N'EX 33è™Ÿ", highlight: true }, { time: "15:28", label: "N'EX 37è™Ÿ", isWarning: true }]
                    },
                    { 
                    time: "16:00", 
                    type: "plane", 
                    title: "æ©Ÿå ´ Check-in", 
                    desc: "å‹é¬¨æ©‹çš„é–‹åˆ", 
                    preview: "ç™»æ©Ÿå£åƒé–‹åˆæ©‹ï¼Œè¨˜æ†¶ç®±ç·©ç·©æ”¶æŸï¼Œç­‰å¾…è¿”èˆªã€‚",
                    details: "æ©Ÿå ´Check-in æ«ƒæª¯å¦‚åŒéš…ç”°å·ä¸Šçš„å‹é¬¨æ©‹ (Kachidoki Bridge)ã€‚å®ƒæ—¢æ˜¯çµ‚é»ï¼Œä¹Ÿæ˜¯èµ·é»ã€‚å·¨å¤§çš„é‹¼éµçµæ§‹è±¡å¾µè‘—å·¥æ¥­æ™‚ä»£çš„è¼ç…Œï¼Œæ¯ä¸€æ¬¡çš„é–‹åˆï¼ˆèµ·é£›é™è½ï¼‰éƒ½æ˜¯ä¸€æ¬¡å°ä¸–ç•Œçš„æ“æŠ±ã€‚åœ¨éœ“è™¹ç‡ˆç®¡çš„å¾®å…‰ä¸­ï¼Œæˆ‘å€‘å‘Šåˆ¥æ±äº¬ï¼Œå¦‚åŒæ¼«ç•«ã€Šçƒé¾æ´¾å‡ºæ‰€ã€‹æœ€å¾Œä¸€å¹•çš„é•·é¡é ­ã€‚",
                    locationQuery: "Narita Airport Terminal 1",
                    icon: Plane,
                    style: 'kachidoki', // Kachidoki Bridge Style
                    weather: { type: 'rain', current: '6Â°C', high: '8Â°C', low: '4Â°C', loc: 'NRT' },
                    keywords: ["å·¥æ¥­éºç”¢", "é‹¼éµçµæ§‹", "é–‹åˆæ©‹"],
                    outfit: "å›å°ç£æœƒè®Šç†±ï¼Œå»ºè­°è£¡é¢ç©¿çŸ­è¢–/è–„é•·è¢–ï¼Œå¤–é¢ç©¿åšå¤–å¥—ã€‚",
                    insights: {
                        travel: "æ‰‹é‚Šå‰©ä¸‹çš„æ—¥å¹£éŠ…æ¿ï¼Œå¯ä»¥å»æ©Ÿå ´è¨­æœ‰çš„æ•´æ’æ‰­è›‹æ©Ÿæ¶ˆè€—æ‰ã€‚FaSoLa å…ç¨…åº—ç”Ÿæ„æ¥µå¥½ï¼Œçœ‹åˆ°æœ‰è²¨è«‹ç›´æ¥æ‹¿ã€‚",
                        local: "ã€Œæˆç”°æ©Ÿå ´å…¶å¯¦é›¢æ±äº¬è¶…é ï¼Œæˆ‘å€‘éƒ½æˆ²ç¨±æ˜¯ã€åƒè‘‰æ©Ÿå ´ã€ã€‚ä¸é T1 å—ç¿¼é‚£ç¨®å‡ºç™¼çš„æ°›åœçœŸçš„å¾ˆæ£’ã€‚ã€",
                        trap: "æˆç”°æ©Ÿå ´ T1 å—ç¿¼çš„å®‰æª¢æ’éšŠéšŠä¼æœ‰æ™‚æœƒéå¸¸é•·ã€‚å»ºè­° Check-in å®Œç›¡å¿«éå®‰æª¢ã€‚",
                        creative: "é€™è£¡çš„é‹¼éª¨çµæ§‹èˆ‡é‰šé‡˜è£é£¾ï¼Œæ˜¯å°æ˜­å’Œå·¥æ¥­æ™‚ä»£çš„è‡´æ•¬ã€‚å†·å†½çš„è—è‰²ç‡ˆå…‰ç‡Ÿé€ å‡ºå¤œæ™šéš…ç”°å·é‚Šçš„æ°›åœã€‚",
                        business: "ã€å…ç¨…åº—ç¶“æ¿Ÿã€‘æ©Ÿå ´é›¶å”®ç‡Ÿæ”¶å¾€å¾€ä½”æ©Ÿå ´ç¸½ç‡Ÿæ”¶çš„ä¸€åŠä»¥ä¸Šã€‚æˆç”°æ©Ÿå ´é€éå¤§æ•¸æ“šåˆ†ææ—…å®¢åœ‹ç±ï¼Œç²¾æº–æŠ•æ”¾é«˜å–®åƒ¹ç¾å¦èˆ‡ä¼´æ‰‹ç¦®ã€‚",
                        history: "ã€é‡˜å­æˆ¶ã€‘æˆç”°æ©Ÿå ´æ˜¯æ—¥æœ¬å”¯ä¸€æœ‰ã€Œé‡˜å­æˆ¶ã€é‚„ä½åœ¨è·‘é“æ—çš„åœ‹éš›æ©Ÿå ´ã€‚ç‚ºäº†é¿é–‹é€™äº›è¾²ç”°ï¼Œè¨ˆç¨‹è»Šæ»‘è¡Œé“å¿…é ˆç¹è·¯ã€‚",
                        shopping: "ã€å¨å£«å¿Œã€‘æ—¥æœ¬å¨å£«å¿Œï¼ˆéŸ¿ã€å±±å´ï¼‰åœ¨å¸‚å€å¾ˆé›£è²·ï¼Œæ©Ÿå ´å…ç¨…åº—å¶çˆ¾æœƒæœ‰å°‘é‡é‡‹å‡ºã€‚å¦‚æœæœ‰çœ‹åˆ°ï¼Œè«‹ä¸è¦çŒ¶è±«ï¼Œé‚£æ˜¯ç¨€æœ‰å¯¶ç‰©ã€‚"
                    },
                    flightInfo: { checkIn: "17:25", boarding: "19:10", departure: "19:55", arrival: "23:00", terminal: "T1 å—ç¿¼" }
                    }
                ]
                }
            ], []);

            const dayKeys = useMemo(() => schedule.map((day) => day.date.replace('/', '')), [schedule]);

            const currentSchedule = schedule[activeDay];
            const currentRoute = mapRoutes[activeDay]; 
            
            if (!currentSchedule) return null;

            useEffect(() => {
                if (!slideInKey) return;
                const id = requestAnimationFrame(() => setSlideInKey(null));
                return () => cancelAnimationFrame(id);
            }, [slideInKey]);

            const getTypeColor = (type) => {
                switch (type) {
                case 'flight': return 'bg-blue-600 text-white';
                case 'transport': return 'bg-slate-700 text-white';
                case 'hotel': return 'bg-emerald-600 text-white';
                case 'food': return 'bg-amber-600 text-white';
                case 'shop': return 'bg-pink-600 text-white';
                case 'warning': return 'bg-rose-600 text-white';
                default: return 'bg-slate-500 text-white';
                }
            };

            const getTypeBg = (type) => {
                switch (type) {
                case 'flight': return 'bg-blue-50 border-blue-200 hover:bg-blue-100';
                case 'transport': return 'bg-slate-50 border-slate-200 hover:bg-slate-100';
                case 'hotel': return 'bg-emerald-50 border-emerald-200 hover:bg-emerald-100';
                case 'food': return 'bg-amber-50 border-amber-200 hover:bg-amber-100';
                case 'shop': return 'bg-pink-50 border-pink-200 hover:bg-pink-100';
                default: return 'bg-white border-slate-200 hover:bg-slate-50';
                }
            };

            const getStyleClass = (style) => style ? `style-${style}` : '';
            const isGlitchStyle = (style) => ['kon', 'ghoul'].includes(style);

            const modalStyle = selectedEvent?.style;
            const glitchStyle = isGlitchStyle(modalStyle);
            const isKusama = modalStyle === 'kusama';
            const modalContainerClass = [
                "bg-[#fdfbf7] relative z-10 w-full sm:max-w-lg shadow-2xl border border-stone-200 flex flex-col max-h-[85vh] animate-in fade-in zoom-in duration-500 overflow-hidden",
                getStyleClass(modalStyle)
            ].join(' ');
            const modalHeaderClass = `p-5 sm:p-6 border-b border-stone-100 relative ${glitchStyle ? 'bg-[#0f172a] border-gray-800' : ''}`;
            const modalCloseClass = `absolute top-6 right-6 transition-colors ${glitchStyle ? 'text-red-500 hover:text-red-400' : 'text-stone-300 hover:text-stone-600'}`;
            const modalContentClass = `p-5 sm:p-6 overflow-y-auto custom-scrollbar ${glitchStyle ? 'bg-[#111] text-stone-300' : ''} ${isKusama ? 'inner-card' : ''}`;
            const modalFooterClass = `p-4 sm:p-5 border-t flex justify-center ${glitchStyle ? 'bg-[#0a0a0a] border-zinc-900' : 'bg-stone-50 border-stone-100'}`;
            const badgeClass = `text-[10px] font-bold uppercase tracking-[0.2em] px-2 py-1 ${glitchStyle ? 'text-red-500 bg-black border border-red-900' : 'text-stone-400 bg-stone-50'}`;
            const glitchTitleClass = glitchStyle ? 'text-white' : 'font-display text-stone-800';
            const glitchMetaClass = `flex items-center text-sm font-medium ${glitchStyle ? 'text-blue-400 font-mono' : 'text-stone-500 font-serif italic'}`;
            const glitchContentText = `text-sm leading-8 mb-8 text-justify ${glitchStyle ? 'text-stone-400 font-sans tracking-wide' : 'text-stone-600 font-serif'}`;
            const vocabTitleClass = `font-bold mb-6 text-[10px] flex items-center justify-center uppercase tracking-[0.2em] font-sans ${glitchStyle ? 'text-blue-900' : 'text-stone-300'}`;
            const trapContainerClass = `mb-8 p-6 border-l-2 ${glitchStyle ? 'bg-red-900/20 border-red-600 text-red-400' : 'bg-rose-50/50 border-rose-300'}`;
            const trapHeadingClass = `font-bold text-xs flex items-center mb-3 uppercase tracking-wider ${glitchStyle ? 'text-red-500' : 'font-display text-rose-800'}`;
            const trapTextClass = `text-sm leading-relaxed ${glitchStyle ? 'font-sans opacity-90' : 'text-rose-900/70 font-serif'}`;
            const insightHeaderClass = `flex items-center gap-2 mb-2 transition-colors ${glitchStyle ? 'text-blue-600 group-hover:text-blue-400' : 'text-stone-400 group-hover:text-stone-600'}`;
            const insightBodyClass = `text-sm leading-7 pl-6 border-l transition-colors ${glitchStyle ? 'text-stone-400 border-zinc-800 font-sans' : 'text-stone-600 font-serif border-stone-100 group-hover:border-stone-300'}`;
            const mapLinkClass = `text-xs font-bold tracking-widest uppercase transition-colors flex items-center gap-2 font-sans ${glitchStyle ? 'text-blue-500 hover:text-white' : 'text-stone-400 hover:text-stone-800'}`;

            return (
                <div className="min-h-screen bg-[#f9f8f6] font-sans text-stone-800 pb-12 relative transition-colors duration-1000">
                
                {/* Header - Compact Layout */}
                <div className={`p-4 pb-6 relative z-10 border-b border-stone-200 bg-[#fbfaf8]`}>
                    <div className="flex flex-col sm:flex-row sm:justify-between sm:items-start mb-2 sm:mb-4 max-w-2xl mx-auto gap-2">
                        <div className="flex-1">
                            <div className="flex items-center space-x-2 mb-1">
                                <span className="text-[10px] font-bold uppercase tracking-[0.25em] text-stone-400 font-sans">
                                    TOKYO CHRONICLES 2025
                                </span>
                            </div>
                            <h1 className={`hero-title-main text-2xl sm:text-4xl font-bold tracking-tight mb-1 leading-tight font-display ${currentSchedule.theme.main}`}>
                                {currentSchedule.title}
                            </h1>
                            <p className={`text-xs sm:text-sm font-serif italic tracking-wide mb-1 ${currentSchedule.theme.sub}`}>
                                {currentSchedule.subtitle}
                            </p>
                            <p className="text-stone-400 text-xs flex items-center font-medium tracking-wider font-sans mt-2">
                                <MapPin size={12} className="mr-1.5" /> {currentSchedule.location}
                            </p>
                        </div>
                        <div className="text-left sm:text-right mt-2 sm:mt-0 flex flex-row sm:flex-col items-baseline sm:items-end gap-2 sm:gap-0">
                            <div className="text-4xl sm:text-5xl font-black text-stone-200 font-display tracking-tighter leading-none">
                                {currentSchedule.date.split('/')[1]}
                            </div>
                            <div className="text-stone-300 font-serif text-sm tracking-widest uppercase">Dec</div>
                        </div>
                    </div>
                </div>

                {/* Date Selector */}
                <div className="px-4 -mt-8 mb-8 relative z-20 animate-in max-w-2xl mx-auto">
                    <div className="bg-white/80 backdrop-blur-sm rounded-none shadow-sm p-2 overflow-x-auto no-scrollbar border border-stone-200 day-tabs">
                        <button
                            className={`day-tab ${currentDayKey === '1219' ? 'is-active' : ''}`}
                            data-day="1219"
                            onClick={() => {
                                if ('1219' === currentDayKey) return;
                                setTransitionDir(Number('1219') > Number(currentDayKey) ? 'forward' : 'backward');
                                setPrevDayKey(currentDayKey);
                                setCurrentDayKey('1219');
                                setActiveDay(0);
                                setSlideInKey('1219');
                            }}
                        >
                            12/19 é‡‘
                        </button>
                        <button
                            className={`day-tab ${currentDayKey === '1220' ? 'is-active' : ''}`}
                            data-day="1220"
                            onClick={() => {
                                if ('1220' === currentDayKey) return;
                                setTransitionDir(Number('1220') > Number(currentDayKey) ? 'forward' : 'backward');
                                setPrevDayKey(currentDayKey);
                                setCurrentDayKey('1220');
                                setActiveDay(1);
                                setSlideInKey('1220');
                            }}
                        >
                            12/20 åœŸ
                        </button>
                        <button
                            className={`day-tab ${currentDayKey === '1221' ? 'is-active' : ''}`}
                            data-day="1221"
                            onClick={() => {
                                if ('1221' === currentDayKey) return;
                                setTransitionDir(Number('1221') > Number(currentDayKey) ? 'forward' : 'backward');
                                setPrevDayKey(currentDayKey);
                                setCurrentDayKey('1221');
                                setActiveDay(2);
                                setSlideInKey('1221');
                            }}
                        >
                            12/21 æ—¥
                        </button>
                        <button
                            className={`day-tab ${currentDayKey === '1222' ? 'is-active' : ''}`}
                            data-day="1222"
                            onClick={() => {
                                if ('1222' === currentDayKey) return;
                                setTransitionDir(Number('1222') > Number(currentDayKey) ? 'forward' : 'backward');
                                setPrevDayKey(currentDayKey);
                                setCurrentDayKey('1222');
                                setActiveDay(3);
                                setSlideInKey('1222');
                            }}
                        >
                            12/22 æœˆ
                        </button>
                        <button
                            className={`day-tab ${currentDayKey === '1223' ? 'is-active' : ''}`}
                            data-day="1223"
                            onClick={() => {
                                if ('1223' === currentDayKey) return;
                                setTransitionDir(Number('1223') > Number(currentDayKey) ? 'forward' : 'backward');
                                setPrevDayKey(currentDayKey);
                                setCurrentDayKey('1223');
                                setActiveDay(4);
                                setSlideInKey('1223');
                            }}
                        >
                            12/23 ç«
                        </button>
                    </div>
                </div>

                {/* Main List Content */}
                <div className="px-6 max-w-2xl mx-auto min-h-[50vh]">
                    <div className="day-panel-container pb-16">
                        {schedule.map((day, dayIndex) => {
                        const dayKey = dayKeys[dayIndex];
                        const isActivePanel = currentDayKey === dayKey;
                        const slideClass = isActivePanel && slideInKey === dayKey
                            ? (transitionDir === 'forward' ? ' slide-in-from-right' : ' slide-in-from-left')
                            : '';
                        const panelClass = `day-panel${isActivePanel ? ' is-active' : ''}${slideClass ? ' ' + slideClass : ''}`;
                        const route = mapRoutes[dayIndex];
                        return (
                            <div 
                                key={dayKey} 
                                className={panelClass}
                                data-day={dayKey}
                            >
                                <div className="space-y-12">
                                {day.events.map((event, index) => {
                                    const Icon = event.icon;
                                    const preview = event.preview || event.desc;
                                    return (
                                    <div 
                                        key={index} 
                                        className="group cursor-pointer relative pl-8 border-l border-stone-200 hover:border-stone-400 transition-colors duration-500"
                                        onClick={() => setSelectedEvent(event)}
                                    >
                                        {/* Time */}
                                        <div className={`absolute -left-[5px] top-0 w-2.5 h-2.5 rounded-full border-2 border-[#f9f8f6] transition-colors duration-300 ${day.theme.btn}`}></div>
                                        
                                        <div className="flex justify-between items-start mb-2">
                                            <div className="flex flex-col gap-1">
                                                <div className="font-serif text-stone-400 text-sm tracking-widest">{event.time}</div>
                                            {event.weather && (
                                                <div className="flex items-start gap-2 text-[11px] text-stone-500 font-sans">
                                                    <WeatherIcon type={event.weather.type} size={14} className="mt-0.5 text-stone-400" />
                                                    <div className="flex flex-col leading-tight">
                                                        <span className="font-semibold text-[12px]">{event.weather.current || event.weather.temp}</span>
                                                        <div className="flex flex-wrap gap-2 text-[10px] uppercase tracking-[0.25em] text-stone-400">
                                                            {event.weather.high && <span>H {event.weather.high}</span>}
                                                            {event.weather.low && <span>L {event.weather.low}</span>}
                                                            <span>{event.weather.loc}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            )}
                                            </div>
                                            
                                            {/* Always-visible Google Maps shortcut */}
                                            <div className="flex items-center">
                                                <a
                                                    href={`https://www.google.com/maps/search/?api=1&query=${event.locationQuery}`}
                                                    target="_blank"
                                                    rel="noopener noreferrer"
                                                    onClick={(e) => e.stopPropagation()}
                                                    className="flex items-center justify-center w-8 h-8 text-[11px] font-bold text-stone-500 hover:text-stone-800 transition-colors bg-white rounded-full shadow-sm border border-stone-200"
                                                >
                                                    <MapIcon size={13} />
                                                </a>
                                            </div>
                                        </div>

                                        {/* Content */}
                                        <div className="mb-4">
                                            <h3 className={`font-display text-xl font-bold mb-1 group-hover:text-black transition-colors duration-300 ${day.theme.main}`}>{event.title}</h3>
                                            <p className={`text-sm font-serif leading-relaxed line-clamp-2 ${day.theme.sub}`}>
                                                {preview}
                                            </p>
                                        </div>

                                        {/* Tags */}
                                        <div className="flex gap-2 flex-wrap mb-4">
                                            {event.keywords && event.keywords.map((k, i) => (
                                                <span key={i} className="text-[10px] font-medium text-stone-400 border-b border-stone-200 pb-0.5">
                                                #{k}
                                                </span>
                                            ))}
                                        </div>
                                    </div>
                                    );
                                })}
                                </div>

                                {/* Daily Map Section */}
                                {activeDay === dayIndex && (
                                <div className="mb-16 animate-in fade-in zoom-in duration-1000 delay-200">
                                    <div className="flex items-center justify-center mb-6">
                                        <span className="h-px w-8 bg-stone-300"></span>
                                        <h4 className="text-xs font-serif text-stone-400 uppercase tracking-[0.2em] mx-4">
                                            JOURNEY MAP
                                        </h4>
                                        <span className="h-px w-8 bg-stone-300"></span>
                                    </div>
                                    <div className="bg-white p-2 shadow-xl shadow-stone-200/50 border border-stone-100 style-matsumoto">
                                        <DailyMapView route={route} dayIndex={dayIndex} />
                                    </div>
                                </div>
                                )}
                            </div>
                        );
                        })}
                    </div>
                    
                    <div className="mt-12 text-center pb-12 opacity-40 font-serif">
                        <p className="text-[10px] tracking-[0.3em] uppercase text-stone-500">Tokyo Chronicles 2025</p>
                    </div>
                </div>

                {/* Detail Modal */}
                {selectedEvent && (
                    <div className="fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6">
                    <div 
                        className="absolute inset-0 bg-[#f6f5f3]/90 backdrop-blur-sm transition-opacity duration-500"
                        onClick={() => setSelectedEvent(null)}
                    ></div>
                    <div className={modalContainerClass}>
                        
                        {/* Kon Style Glitch Effect */}
                        {glitchStyle && (
                             <div className="kon-border"></div>
                        )}

                        {/* Modal Header */}
                        <div className={modalHeaderClass}>
                            <button 
                                onClick={() => setSelectedEvent(null)}
                                className={modalCloseClass}
                            >
                                <X size={20} strokeWidth={modalStyle === 'kon' ? 3 : 1.5} />
                            </button>
                            
                            <div className="flex items-center gap-3 mb-4">
                                <span className={badgeClass}>
                                {selectedEvent.type.toUpperCase()}
                                </span>
                            </div>
                            
                            <h3 className={`text-2xl sm:text-3xl font-bold mb-2 leading-tight ${glitchTitleClass}`}>{selectedEvent.title}</h3>
                            <div className={glitchMetaClass}>
                                <Clock size={14} className="mr-2 opacity-50" />
                                {selectedEvent.time}
                            </div>
                        </div>

                        {/* Modal Content */}
                        <div className={modalContentClass}>
                            
                            <p className={glitchContentText}>
                                {selectedEvent.details}
                            </p>

                            {/* Trap Insight */}
                            {selectedEvent.insights?.trap && (
                                <div className={trapContainerClass}>
                                    <h4 className={trapHeadingClass}>
                                        <AlertTriangle size={12} className="mr-2" />
                                        Trap Warning
                                    </h4>
                                    <p className={trapTextClass}>
                                        {selectedEvent.insights.trap}
                                    </p>
                                </div>
                            )}

                            {/* Japanese Vocabulary */}
                            {selectedEvent.vocabulary && (
                                <div className="mb-10 vocab-section">
                                    <h4 className={vocabTitleClass}>
                                        â€” Vocabulary â€”
                                    </h4>
                                    <div className="grid gap-6">
                                        {selectedEvent.vocabulary.map((vocab, i) => (
                                            <div key={i} className="vocab-card relative pl-4 border-l border-stone-200 p-4 rounded-lg">
                                                <div className="flex items-baseline gap-3 mb-1">
                                                    <ruby className="vocab-term text-2xl font-medium tracking-wide text-stone-800 font-display">
                                                        {vocab.term}
                                                        <rt className="vocab-reading text-xs mb-1 block text-stone-500 font-serif">{vocab.reading}</rt>
                                                    </ruby>
                                                    <span className="vocab-badge text-xs font-bold text-stone-500 bg-stone-50 px-2 py-0.5 rounded-full border border-stone-100">{vocab.meaning}</span>
                                                </div>
                                                <p className="vocab-desc text-xs leading-relaxed text-stone-600 font-serif">
                                                    {vocab.desc}
                                                </p>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {/* Insights Grid */}
                            {selectedEvent.insights && (
                                <div className="space-y-8">
                                    <h4 className={vocabTitleClass}>
                                        â€” Insights â€”
                                    </h4>
                                    
                                    {Object.entries(selectedEvent.insights).map(([key, value]) => {
                                        if (key === 'trap') return null;
                                        
                                        let icon, label;
                                        switch(key) {
                                            case 'shopping': icon = <Gift size={14}/>; label = "Shopping Taste"; break;
                                            case 'creative': icon = <Lightbulb size={14}/>; label = "Creative"; break;
                                            case 'history': icon = <BookOpen size={14}/>; label = "History"; break;
                                            case 'business': icon = <Briefcase size={14}/>; label = "Business"; break;
                                            case 'politics': icon = <Landmark size={14}/>; label = "Politics"; break;
                                            case 'local': icon = <Users size={14}/>; label = "Local Voice"; break;
                                            case 'travel': icon = <Compass size={14}/>; label = "Travel Note"; break;
                                            default: icon = <Info size={14}/>; label = "Info";
                                        }

                                        return (
                                            <div key={key} className="group">
                                                <div className={insightHeaderClass}>
                                                    {icon}
                                                    <span className="text-[10px] font-bold uppercase tracking-widest font-sans">{label}</span>
                                                </div>
                                                <p className={insightBodyClass}>
                                                    {value}
                                                </p>
                                            </div>
                                        );
                                    })}
                                </div>
                            )}
                        
                        </div>
                        
                        <div className={modalFooterClass}>
                             <a 
                                href={`https://www.google.com/maps/search/?api=1&query=${selectedEvent.locationQuery}`} 
                                target="_blank" 
                                rel="noopener noreferrer"
                                className={mapLinkClass}
                            >
                                <MapIcon size={14} />
                                Open in Google Maps
                            </a>
                        </div>
                    </div>
                    </div>
                )}
                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<TripApp />);
    </script>

    <!-- Floating Menu -->
    <div class="floating-menu">
      <button class="floating-fab-button" id="fabToggle" aria-label="å¿«é€ŸåŠŸèƒ½">
        â˜°
      </button>

      <div class="floating-menu-panel" id="floatingMenuPanel">
        <a class="floating-menu-item" href="#" data-action="sos">
          <span class="icon">1</span>
          <span class="label">ç·Šæ€¥è³‡è¨Š</span>
        </a>
        <a class="floating-menu-item" href="#" data-action="bear">
          <span class="icon">2</span>
          <span class="label">ç†Šçš„æƒ…å ±</span>
        </a>
        <a class="floating-menu-item" href="#" data-action="map">
          <span class="icon">3</span>
          <span class="label">æ±äº¬åœ°éµåœ–</span>
        </a>
        <a class="floating-menu-item" href="#" data-action="tax">
          <span class="icon">4</span>
          <span class="label">2026 æ—¥æœ¬é€€ç¨…æ–°åˆ¶</span>
        </a>
        <a class="floating-menu-item" href="#" data-action="check">
          <span class="icon">5</span>
          <span class="label">æ—¥æœ¬å…¥å¢ƒ Check Card</span>
        </a>
        <a class="floating-menu-item" href="#" data-action="prep">
          <span class="icon">6</span>
          <span class="label">è¡Œå‰ Checklist</span>
        </a>
        <a class="floating-menu-item" href="#" data-action="top">
          <span class="icon">7</span>
          <span class="label">å›åˆ°æœ€ä¸Šé¢</span>
        </a>
      </div>
    </div>

    <div class="floating-panel" id="floatingCheck">
      <div class="floating-panel-header">
        <div class="floating-panel-title">
          <i class="fa-solid fa-plane-arrival" aria-hidden="true"></i>
          <span>æ—¥æœ¬å…¥å¢ƒ Check Cardï¼ˆ2025-2026é©ç”¨ï¼‰</span>
        </div>
        <button class="floating-panel-close" data-close="check" aria-label="é—œé–‰ Check Card">
          Ã—
        </button>
      </div>
      <div class="floating-panel-body">
        <div>
          <p class="fp-section-title">
            <i class="fa-solid fa-plane" aria-hidden="true"></i>
            å‡ºç™¼å‰ï¼ˆå»ºè­°å¿…åšï¼‰
          </p>
          <ul class="fp-list">
            <li>
              ğŸŒ <a href="https://www.vjw.digital.go.jp/main/#/vjwplo001" target="_blank" rel="noopener noreferrer" style="color:#93c5fd;">Visit Japan Webï¼ˆVJWï¼‰</a> äº‹å…ˆå¡«å¯«
            </li>
            <li>â†’ è­·ç…§è³‡è¨Šï¼‹èˆªç­ï¼‹ä½å®¿åœ°å€ï¼Œå‡ºç¤º QR å³å¯é€šé—œ</li>
            <li>ğŸ“ å‚™ä»½é‡è¦è³‡æ–™ï¼šè­·ç…§å½±æœ¬ï¼ä½å®¿åœ°å€é›»è©±ï¼ˆä¸­è‹±ï¼‰ï¼å›ç¨‹æ©Ÿç¥¨</li>
            <li>ğŸ“± æ‰‹æ©Ÿæº–å‚™ï¼šç¶²è·¯å¯ç”¨æˆ– QR æˆªåœ–ï¼›æº–å‚™ä¿¡ç”¨å¡/ä¿éšªè¨˜éŒ„</li>
          </ul>
        </div>
        <div>
          <p class="fp-section-title">
            <i class="fa-solid fa-passport" aria-hidden="true"></i>
            æŠµé”æ—¥æœ¬æ™‚æœƒåšä»€éº¼ï¼Ÿ
          </p>
          <ul class="fp-list">
            <li>æ’å…¥å¢ƒéšŠä¼ â†’ å‡ºç¤º VJW QR</li>
            <li>å…¥å¢ƒå¯©æŸ¥ï¼šæœƒå•æ—…éŠç›®çš„èˆ‡åœç•™å¤©æ•¸</li>
            <li>æµ·é—œç”³å‘Š â†’ å‡ºç¤º QR æˆ–é…åˆè¡Œææª¢æŸ¥</li>
          </ul>
        </div>
        <div>
          <p class="fp-section-title">
            <i class="fa-solid fa-exclamation-triangle" aria-hidden="true"></i>
            åªæœ‰ä»¥ä¸‹æƒ…æ³é ˆè£œç´™æœ¬
          </p>
          <ul class="fp-list">
            <li>âš  æ²’äº‹å…ˆå¡« VJW â†’ éœ€è¦å…¥å¢ƒå¡ï¼‹æµ·é—œç”³å‘Šæ›¸</li>
            <li>âš  æ‰‹æ©Ÿæ²’é›» / ç„¡ç¶²è·¯ / QR éºå¤±</li>
            <li>âš  è¢«æŠ½æŸ¥æˆ–ç³»çµ±ç•¶æ©Ÿéœ€ç¾å ´è£œç´™æœ¬</li>
          </ul>
          <p class="fp-reading">å…ˆå¡« VJW = å¤§å¤šå…ç´™å¡ã€‚æ²’å¡«æ‰è¦å¯«ã€‚</p>
        </div>
      </div>
    </div>

    <!-- ç·Šæ€¥è³‡è¨Šé¢æ¿ -->
    <div class="floating-panel dark-panel" id="floatingSos">
      <div class="floating-panel-header">
        <div class="floating-panel-title">
          <i class="fa-solid fa-triangle-exclamation" aria-hidden="true"></i>
          <span>æ—¥æœ¬ç·Šæ€¥è³‡è¨Š &amp; è™•ç†æ­¥é©Ÿ</span>
        </div>
        <button class="floating-panel-close" data-close="sos" aria-label="é—œé–‰ç·Šæ€¥è³‡è¨Š">
          Ã—
        </button>
      </div>

      <div class="floating-panel-hero">
        <img
          src="https://pic.pimg.tw/robow/1380002383-2771175169.jpg"
          alt="å¤œé–“è­¦å±€å¤–è§€èˆ‡é–ƒçˆè­¦ç‡ˆ"
        />
      </div>

      <div class="floating-panel-body">
        <div>
          <h3 class="fp-section-title">
            <i class="fa-solid fa-phone-volume" aria-hidden="true"></i>
            ç·Šæ€¥é›»è©±
          </h3>
          <ul class="fp-list">
            <li>
              <strong>110 è­¦å¯Ÿï¼ˆäº‹æ•…ï¼ç«Šç›œï¼‰</strong>
              <span class="fp-reading">ã‘ã„ã•ã¤ï¼ˆKeisatsuï¼‰</span>
            </li>
            <li>
              <strong>119 æ•‘è­·ï¼æ¶ˆé˜²</strong>
              <span class="fp-reading">ãã‚…ã†ãã‚…ã†ã—ã‚ƒï¼ã—ã‚‡ã†ã¼ã†</span>
            </li>
            <li><strong>ä¿¡ç”¨å¡</strong> â†’ æ‰“å¡èƒŒé¢åœ‹éš›é›»è©±</li>
            <li>
              <strong>è­·ç…§</strong> â†’ å…ˆå»
              <span class="fp-reading-inline">äº¤ç•ªï¼ã“ã†ã°ã‚“ï¼ˆKÅbanï¼‰</span> å ±æ¡ˆï¼‹
              ä»£è¡¨è™•è£œç™¼
            </li>
          </ul>
        </div>

        <div>
          <h3 class="fp-section-title">
            <i class="fa-solid fa-car-burst" aria-hidden="true"></i>
            äº¤é€šäº‹æ•…ï¼ˆè»Šç¦ï¼ç¢°æ’ï¼‰
          </h3>
          <ul class="fp-list">
            <li>æœ‰å‚·â†’119ï¼ˆæ•‘è­·è»Šï¼‰</li>
            <li>å¾Œâ†’110ï¼ˆè­¦å¯Ÿåˆ°å ´ï¼‰</li>
            <li>æ‹ç…§ / è»Šç‰Œ / æ™‚é–“ / åœ°é» / äº¤æ›è¯çµ¡</li>
            <li>
              å¯ç›´æ¥è¬›çš„è©ï¼š
              <span class="fp-reading-inline">ã“ã†ã¤ã†ã˜ã“ï¼ˆäº¤é€šäº‹æ•…ï¼‰</span>
              <span class="fp-reading-inline">ã‘ã„ã•ã¤ï¼ˆè­¦å¯Ÿï¼‰</span>
              <span class="fp-reading-inline">ãã‚…ã†ãã‚…ã†ã—ã‚ƒï¼ˆæ•‘è­·è»Šï¼‰</span>
            </li>
          </ul>
          <p class="fp-reading">
            ğŸ‘‰ èªªæ³•ç¤ºä¾‹ï¼ˆçŸ­å­—å–Šå°±è¡Œï¼‰ï¼šã€Œäº¤é€šäº‹æ•…ï¼è­¦å¯Ÿï¼æ•‘è­·è»Šï¼ã€
          </p>
        </div>

        <div>
          <h3 class="fp-section-title">
            <i class="fa-solid fa-person-circle-question" aria-hidden="true"></i>
            ç‰©å“é­ç«Š/ä¸è¦‹
          </h3>
          <ul class="fp-list">
            <li>å»äº¤ç•ªå ±æ¡ˆ â†’ æ‹¿éºå¤±/è¢«å®³è­‰æ˜</li>
            <li>å¡/æ‰‹æ©Ÿ â†’ ç«‹åˆ»æ›å¤±</li>
            <li>
              å¯è¬›çš„è©ï¼š
              <span class="fp-reading-inline">ç›—é›£ï¼ã¨ã†ãªã‚“ï¼ˆTÅnanï¼‰ï¼ˆå¤±ç«Šï¼‰</span>
              <span class="fp-reading-inline">è½ã¨ã—ã¾ã—ãŸï¼ãŠã¨ã—ã¾ã—ãŸï¼ˆè½/ä¸è¦‹ï¼‰</span>
              <span class="fp-reading-inline">äº¤ç•ªï¼ã“ã†ã°ã‚“ï¼ˆæ´¾å‡ºæ‰€ï¼‰</span>
              <span class="fp-reading-inline">è²¡å¸ƒï¼ã•ã„ãµï¼ˆéŒ¢åŒ…ï¼‰ï½œã‚¹ãƒãƒ›ï¼ˆæ‰‹æ©Ÿï¼‰</span>
            </li>
          </ul>
          <p class="fp-reading">
            ğŸ‘‰ å¯¦ç”¨å–Šæ³•ï¼šã€Œç›—é›£ï¼äº¤ç•ªï¼Ÿã€ã€Œãƒ‘ã‚¹ãƒãƒ¼ãƒˆ è½ã¨ã—ã¾ã—ãŸã€
          </p>
        </div>

        <div>
          <h3 class="fp-section-title">
            <i class="fa-solid fa-passport" aria-hidden="true"></i>
            è­·ç…§éºå¤±
          </h3>
          <ul class="fp-list">
            <li>äº¤ç•ªå ±æ¡ˆâ†’å–å¾—éºå¤±è­‰æ˜</li>
            <li>å»å°ç£é§æ—¥ä»£è¡¨è™•è¾¦è£œç™¼æˆ–æ—…è¡Œè­‰æ˜</li>
            <li>
              å¯è¬›è©ï¼š
              <span class="fp-reading-inline">ãƒ‘ã‚¹ãƒãƒ¼ãƒˆï¼ˆè­·ç…§ï¼‰</span>
              <span class="fp-reading-inline">å†ç™ºè¡Œï¼ã•ã„ã¯ã£ã“ã†ï¼ˆè£œç™¼ï¼‰</span>
              <span class="fp-reading-inline">å°æ¹¾ä»£è¡¨å‡¦ï¼ãŸã„ã‚ã‚“ã ã„ã²ã‚‡ã†ã—ã‚‡</span>
            </li>
          </ul>
          <p class="fp-reading">ğŸ“Œ å°æé†’ï¼šè­·ç…§å½±æœ¬å­˜æ‰‹æ©Ÿ/é›²ç«¯</p>
        </div>

        <div>
          <h3 class="fp-section-title">
            <i class="fa-solid fa-briefcase-medical" aria-hidden="true"></i>
            ç”Ÿç—…/å—å‚·
          </h3>
          <ul class="fp-list">
            <li>æ€¥é‡â†’119ï¼ˆæ•‘è­·ï¼‰</li>
            <li>è¼•ç—‡â†’å…§ç§‘ Clinicï¼è—¥å±€ è–¬å±€ï¼ã‚„ã£ãã‚‡ãï¼ˆYakkyokuï¼‰</li>
            <li>
              å¸¸ç”¨è©ï¼š
              <span class="fp-reading-inline">å…·åˆæ‚ªã„ï¼ãã‚ã„ã‚ã‚‹ã„ï¼ˆä¸èˆ’æœï¼‰</span>
              <span class="fp-reading-inline">ç—…é™¢ï¼ã³ã‚‡ã†ã„ã‚“ï¼ˆé†«é™¢ï¼‰</span>
              <span class="fp-reading-inline">é ­ç—›ï¼ˆãšã¤ã†ï¼‰ï¼ç™ºç†±ï¼ˆã¯ã¤ã­ã¤ï¼‰ï¼ä¸‹ç—¢ï¼ˆã’ã‚Šï¼‰</span>
            </li>
          </ul>
          <p class="fp-reading">
            ğŸ‘‰ ç›´æ¥èªªç—‡ç‹€ï¼‹ç—…é™¢å³å¯ï¼Œä¾‹ï¼šã€Œå…·åˆæ‚ªã„ ç—…é™¢ï¼Ÿã€
          </p>
        </div>
      </div>
    </div>

    <!-- ç†Šçš„æƒ…å ±é¢æ¿ -->
    <div class="floating-panel dark-panel" id="floatingBear">
      <div class="floating-panel-header">
        <div class="floating-panel-title">
          <i class="fa-solid fa-paw" aria-hidden="true"></i>
          <span>ç†Šçš„æƒ…å ±</span>
        </div>
        <button class="floating-panel-close" data-close="bear" aria-label="é—œé–‰ç†Šçš„æƒ…å ±">
          Ã—
        </button>
      </div>

      <div class="floating-panel-hero">
        <div style="border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.1);padding:0.75rem;background:rgba(15,23,42,0.6);font-size:13px;line-height:1.5;color:#e5e7eb;">
          <p style="margin:0 0 0.35rem;font-weight:600;">
            ä½ è¡Œç¨‹é—œæ³¨å€çš„ç†Šç¢°æ’æ©Ÿç‡
          </p>
          <p style="margin:0 0 0.4rem;">
            ä¾æ“š <a href="https://fukazawa-lab.github.io/japan-bear-map/index_en.html?utm_source=goodlucktrip" target="_blank" style="color:#93c5fd;">Japan Bear Map</a> ï¼Œå¯æŸ¥å‡ºä½ å°‡å‰å¾€çš„åœ°é»ï¼ˆè‰æ´¥ã€è¼•äº•æ¾¤ã€ç†Šè°·ï¼‰çš„æœ€æ–°æ¥è¿‘/ç›®æ“Šæ©Ÿç‡ã€‚
          </p>
          <ul style="margin:0;padding-left:1.1rem;">
            <li>è‰æ´¥ï¼ˆé«˜æ„å¤–ç†±é»ï¼‰â†’ å»ºè­°ä¿æŒå…¬è·¯èˆ‡éŠå®¢æœå‹™ä¸­å¿ƒç§»å‹•</li>
            <li>è¼•äº•æ¾¤ï¼ç†Šè°·â†’ å±±æ—æ´»å‹•ä»å±¬ä½è‡³ä¸­é¢¨éšªï¼Œä½†å‡ºç¾è¶³è·¡éœ€ç«‹å³æ’¤é€€</li>
            <li style="margin-top:0.4rem;"><a href="https://fukazawa-lab.github.io/japan-bear-map/index_en.html?utm_source=goodlucktrip" target="_blank" style="color:#93c5fd;">ğŸ§­ ç«‹å³æŸ¥çœ‹ä½ åœ°é»çš„æ©Ÿç‡</a></li>
          </ul>
        </div>
      </div>

      <div class="floating-panel-body">
        <div>
          <h3 class="fp-section-title">
            <i class="fa-solid fa-compass" aria-hidden="true"></i>
            å‡ºç™¼å‰é é˜²
          </h3>
          <ul class="fp-list">
            <li>é¿å…å–®ç¨ã€æ¸…æ™¨æˆ–å‚æ™šé€²å±±ï¼Œé¸æ“‡å·²çŸ¥è·¯ç·š</li>
            <li>ç©¿è‘—äº®è‰²ä¸¦æ”œå¸¶ç†Šéˆ´ï¼è¬›è©±è£½é€ è²éŸ³</li>
            <li>åƒåœ¾ã€é£Ÿç‰©è«‹å¯†å°â€§å¸¶å›ï¼Œä¸åœ¨è·¯é‚Šç•™é¦™å‘³</li>
          </ul>
        </div>

        <div>
          <h3 class="fp-section-title">
            <i class="fa-solid fa-triangle-exclamation" aria-hidden="true"></i>
            ç™¼ç¾è·¡è±¡
          </h3>
          <ul class="fp-list">
            <li>çœ‹åˆ°ç³ä¾¿ã€çˆªç—•æˆ–æ–°é®®æŠ“ç—• â†’ ç«‹å³æŠ˜è¿”</li>
            <li>é é›¢æ²³è°·å’Œæœæ¨¹åœæ¬„ï¼Œé€™æ˜¯ç†Šçš„è£œçµ¦é»</li>
            <li>ä¿æŒäººæ•¸ã€æ¸›å°‘å–®ä¸€åç§»</li>
          </ul>
        </div>

        <div>
          <h3 class="fp-section-title">
            <i class="fa-solid fa-person-hiking" aria-hidden="true"></i>
            é‡åˆ°ç†Šæ™‚
          </h3>
          <ul class="fp-list">
            <li>ä¿æŒå†·éœã€ä¸è¦é€ƒè·‘ï¼Œæ…¢æ…¢å¾Œé€€</li>
            <li>é¢å‘ç†Šï¼Œè¼•è²èªªè©±ï¼›ä¸å°–å«</li>
            <li>èƒŒåŒ…æ”¾åœ¨èº«å‰ç•¶è­·ç½©ï¼Œæé˜²å‰æŒæ”»æ“Š</li>
          </ul>
        </div>

        <div>
          <h3 class="fp-section-title">
            <i class="fa-solid fa-shield" aria-hidden="true"></i>
            ç†Šé è¿‘
          </h3>
          <ul class="fp-list">
            <li>å°‹æ‰¾æ©è”½èˆ‡é«˜åœ°ï¼Œä¿è­·é ­é ¸</li>
            <li>é›¢é–‹ç¾å ´å¾Œç«‹åˆ»é€šå ±ç®¡ç†å–®ä½</li>
            <li>è‹¥é­æ”»æ“Šï¼Œå¯ç”¨éš¨èº«å“¨å­æˆ–ç©ºç½è£½é€ è²éŸ¿</li>
          </ul>
        </div>

        <div>
          <h3 class="fp-section-title">
            <i class="fa-solid fa-link" aria-hidden="true"></i>
            å®˜æ–¹è³‡è¨Š
          </h3>
          <ul class="fp-list">
            <li><a href="https://www.pref.nagano.lg.jp/yasei/bear.html" target="_blank" class="fp-reading-inline">é•·é‡ç¸£ç†Šè³‡è¨Šï¼ˆå«è¼•äº•æ¾¤ï¼‰</a></li>
            <li><a href="https://www.pref.gunma.jp/page/16709.html" target="_blank" class="fp-reading-inline">ç¾¤é¦¬ç¸£ç†Šæ³¨æ„å…¬å‘Šï¼ˆè‰æ´¥ï¼‰</a></li>
            <li><a href="https://www.kankyo.metro.tokyo.lg.jp/nature/index.html" target="_blank" class="fp-reading-inline">æ±äº¬éƒ½è‡ªç„¶é‡ç”Ÿå‹•ç‰©è³‡è¨Š</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="floating-panel" id="floatingMap">
      <div class="floating-panel-header">
        <div class="floating-panel-header-title">
          <span>ğŸ—ºï¸</span>
          <span>æ±äº¬åœ°éµåœ–</span>
        </div>
        <button class="floating-panel-close" data-close="map" aria-label="é—œé–‰åœ°éµåœ–">
          Ã—
        </button>
      </div>

      <div style="max-width:320px;">
        <a href="https://www.tokyometro.jp/station/pdf/202305/202305_number_tcn.pdf" target="_blank" style="display:block;border-radius:12px;overflow:hidden;border:1px solid rgba(0,0,0,0.08);box-shadow:0 12px 24px rgba(0,0,0,0.15);">
          <img
            src="https://www.tokyometro.jp/tcn/subwaymap/img/img_01.png"
            alt="Tokyo Metro map preview"
            style="width:100%;display:block;"
          />
        </a>
        <p class="bear-note" style="margin-top:0.75rem;font-size:12px;line-height:1.4;">
          å®˜æ–¹ PDF ç‰ˆæœ¬ï¼ˆ2023/05 ç‰ˆï¼‰ï¼Œé»åœ–æˆ– <a href="https://www.tokyometro.jp/station/pdf/202305/202305_number_tcn.pdf" target="_blank">æ­¤é€£çµ</a> é–‹å•Ÿ/ä¸‹è¼‰ã€‚
          è‹¥å…§åµŒ PDF æ‹’çµ•é€£ç·šï¼Œè«‹åˆ©ç”¨æ­¤å¤–éƒ¨ä¸‹è¼‰é é¢ã€‚
        </p>
      </div>
    </div>

    <div class="floating-panel" id="floatingTax">
      <div class="floating-panel-header">
        <div class="floating-panel-title">
          <i class="fa-solid fa-tag" aria-hidden="true"></i>
          <span>2026 æ—¥æœ¬é€€ç¨…æ–°åˆ¶ï¼ˆ2026/11/1èµ·ï¼‰</span>
        </div>
        <button class="floating-panel-close" data-close="tax" aria-label="é—œé–‰é€€ç¨…è³‡è¨Š">
          Ã—
        </button>
      </div>

      <div class="floating-panel-body">
        <div>
          <p class="fp-section-title">
            <i class="fa-solid fa-bag-shopping" aria-hidden="true"></i>
            æ ¸å¿ƒè®Šé©
          </p>
          <ul class="fp-list">
            <li>ğŸ› è²·æ±è¥¿å…ˆå«ç¨…ï¼Œä¸å†åº—å…§é€€ç¨…</li>
            <li>ğŸ“Œ å›åœ‹å‰ â†’ æ©Ÿå ´é€€ç¨…ï¼Œé ˆæ’éšŠé©—è²¨</li>
            <li>ğŸ“Œ é€€ç¨…ç´„ç‚ºæ¶ˆè²»ç¨… 10%</li>
            <li>ğŸ“Œ é–€æª»ï¼šåŒåº—åŒæ—¥ç¸½é¡ â‰¥ æœªç¨… Â¥5,000</li>
            <li>ğŸ“Œ ä¸åŒåº—å®¶ä¸å¯ç´¯ç©ï¼ˆæ–°åˆ¶åº¦ä¹Ÿä¸€æ¨£ï¼‰</li>
            <li>ğŸ“Œ å–æ¶ˆä¸€èˆ¬/æ¶ˆè€—å“åˆ†é¡ & æ¶ˆè€—å“ 50 è¬ä¸Šé™</li>
          </ul>
        </div>
        <div>
          <p class="fp-section-title">
            <i class="fa-solid fa-phone" aria-hidden="true"></i>
            é€€ç¨…æµç¨‹ï¼ˆæ–°åˆ¶ä¸€æ­¥çœ‹ï¼‰
          </p>
          <ul class="fp-list">
            <li>ğŸ› è³¼ç‰©çµå¸³ï¼ˆå«ç¨…ï¼‰</li>
            <li>ğŸ“„ åº—å®¶æä¾› QRcodeï¼æ”¶æ“šä¸Šé¡¯ç¤º</li>
            <li>ğŸŒ ç™»å…¥ J-TaxRefundï¼ˆé¦–æ¬¡éœ€å»ºç«‹å¸³æˆ¶ï¼‰</li>
            <li>âœˆï¸ å›åœ‹å‰ææ—©åˆ°æ©Ÿå ´ â†’ é€€ç¨…æ«ƒæª¯/KIOSK</li>
            <li>ğŸ§³ æµ·é—œé©—è²¨ï¼ˆéœ€å¸¶å¯¦é«”å•†å“ï¼‰</li>
            <li>ğŸ’µ é€€æ¬¾é€€è‡³ä½ å¡«çš„å¸³æˆ¶/ä¿¡ç”¨å¡</li>
          </ul>
        </div>
        <div>
          <p class="fp-section-title">
            <i class="fa-solid fa-circle-info" aria-hidden="true"></i>
            å…¶ä»–æ³¨æ„
          </p>
          <ul class="fp-list">
            <li>ğŸ”¹ ä¸èƒ½è·¨åº—ç´¯åŠ é‡‘é¡ â†’ éœ€åŒåº—åŒæ—¥</li>
            <li>ğŸ”¹ é‡å¤§å•†å“å¯èƒ½è¢«è¦æ±‚æ‰˜é‹</li>
            <li>ğŸ”¹ å»ºè­°å›ç¨‹å¤šé ç•™æ™‚é–“ï¼ˆæ’éšŠå¯èƒ½å¾ˆä¹…ï¼‰</li>
            <li>ğŸ”¹ é©ç”¨æ‰€æœ‰ä¸€èˆ¬å•†å“ + æ¶ˆè€—å“ï¼ˆå·²åˆä½µåˆ¶åº¦ï¼‰</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="floating-panel" id="floatingChecklist">
      <div class="floating-panel-header">
        <div class="floating-panel-title">
          <i class="fa-solid fa-list-check" aria-hidden="true"></i>
          <span>æ—¥æœ¬è¡Œå‰ Checklist</span>
        </div>
        <button class="floating-panel-close" data-close="checklist" aria-label="é—œé–‰ Checklist">
          Ã—
        </button>
      </div>
      <div class="floating-panel-body">
        <article class="checklist-card">
          <div class="checklist-card-header">
            <strong>ğŸ‡¯ğŸ‡µ æ—¥æœ¬è¡Œå‰æº–å‚™ Checklist</strong>
            <span>æ‰‹æ©Ÿå‹å–„ãƒ»è‡ªå‹•å„²å­˜</span>
          </div>

          <section class="checklist-section">
            <h4>å‡ºç™¼å‰ 1â€“7 å¤©</h4>
            <div class="checklist-items">
              <label><input type="checkbox" data-id="prep-outbound-vjw">VJWå…¥å¢ƒç™»éŒ„ï¼‹QRæˆªåœ–</label>
              <label><input type="checkbox" data-id="prep-outbound-passport">è­·ç…§å½±æœ¬å‚™ä»½ï¼ˆæ‰‹æ©Ÿ/é›²ç«¯ï¼‰</label>
              <label><input type="checkbox" data-id="prep-outbound-insurance">æ—…éŠä¿éšªï¼ˆé†«ç™‚+ä¸ä¾¿éšªï¼‰</label>
              <label><input type="checkbox" data-id="prep-outbound-sim">eSIM / DJB / Soracom / å¯¦é«”å¡</label>
              <label><input type="checkbox" data-id="prep-outbound-card">ä¿¡ç”¨å¡é–‹å•Ÿåœ‹å¤–äº¤æ˜“</label>
              <label><input type="checkbox" data-id="prep-outbound-maps">æ”¶è—Googleåœ°åœ–+é›¢ç·šå€åŸŸ</label>
              <label><input type="checkbox" data-id="prep-outbound-docs">ä½å®¿&è¡Œç¨‹æˆªåœ–å‚™ä»½</label>
              <label><input type="checkbox" data-id="prep-outbound-suica">Suica/ICOCAè¡Œå‹•å¡è¨­å®š</label>
              <label><input type="checkbox" data-id="prep-outbound-emergency">ç·Šæ€¥è¯çµ¡æ–¹å¼å‚™ä»½</label>
            </div>
          </section>

          <section class="checklist-section">
            <h4>è¡Œæ</h4>
            <div class="checklist-items">
              <label><input type="checkbox" data-id="prep-luggage-plug">è¬ç”¨è½‰æ¥é ­ï¼ˆå»ºè­°ï¼‰</label>
              <label><input type="checkbox" data-id="prep-luggage-power">è¡Œå‹•é›»æº+å»¶é•·ç·š+å……é›»ç·š</label>
              <label><input type="checkbox" data-id="prep-luggage-meds">å¸¸å‚™è—¥åŒ…ï¼ˆè…¸èƒƒ/é ­ç—›/éæ•/OKç¹ƒï¼‰</label>
              <label><input type="checkbox" data-id="prep-luggage-gear">å£ç½©/é˜²æ›¬/é›¨å…·</label>
              <label><input type="checkbox" data-id="prep-luggage-weather">ä¾å¤©æ°£æº–å‚™è¡£ç‰©/é›ªè£</label>
              <label><input type="checkbox" data-id="prep-luggage-space">ç•™å‡ºè³¼ç‰©ç©ºé–“ğŸ›</label>
            </div>
          </section>

          <section class="checklist-section">
            <h4>å‡ºç™¼ç•¶å¤©</h4>
            <div class="checklist-items">
              <label><input type="checkbox" data-id="prep-day-passport">è­·ç…§/æ‰‹æ©Ÿ/è¡Œå‹•é›»æº</label>
              <label><input type="checkbox" data-id="prep-day-vjw">VJW QR é›¢ç·šæˆªåœ–</label>
              <label><input type="checkbox" data-id="prep-day-ticket">é›»å­æ©Ÿç¥¨&ç™»æ©Ÿè­‰</label>
              <label><input type="checkbox" data-id="prep-day-address">æ—¥æ–‡ä½å®¿åœ°å€</label>
              <label><input type="checkbox" data-id="prep-day-cash">ç¾é‡‘æ—¥å¹£ Â¥10kâ€“30k</label>
            </div>
          </section>

          <section class="checklist-section">
            <h4>å…¥å¢ƒ</h4>
            <div class="checklist-items">
              <label><input type="checkbox" data-id="prep-arrival-vjw">å‡ºç¤º VJW å¿«é€Ÿé€šé—œ</label>
              <label><input type="checkbox" data-id="prep-arrival-customs">æµ·é—œæƒQRæˆ–äººå·¥æª¢æŸ¥</label>
              <label><input type="checkbox" data-id="prep-arrival-card">ç„¡VJWæ™‚å‚™å¦¥ç´™æœ¬å…¥å¢ƒå¡</label>
            </div>
          </section>

          <section class="checklist-section">
            <h4>é€€ç¨… / è³¼ç‰© (å¦‚é©ç”¨)</h4>
            <div class="checklist-items">
              <label><input type="checkbox" data-id="prep-tax-pay">çµå¸³å…ˆå«ç¨…ï¼Œåº—å…§ä¸é€€</label>
              <label><input type="checkbox" data-id="prep-tax-min">åŒåº—/åŒæ—¥æœªç¨… Â¥5,000 èµ·å¯é€€</label>
              <label><input type="checkbox" data-id="prep-tax-jtax">è³¼ç‰©å¾Œè‡³ <a href="https://j-taxrefund.com" target="_blank" rel="noreferrer">J-TaxRefund</a> å»ºå–®</label>
              <label><input type="checkbox" data-id="prep-tax-airport">æ©Ÿå ´æ’éšŠâ†’é©—è²¨â†’é€€ç¨…å…¥å¸³</label>
            </div>
          </section>

          <section class="checklist-section">
            <h4>ç·Šæ€¥è³‡è¨Š</h4>
            <div class="checklist-items">
              <label><input type="checkbox" data-id="prep-emergency-passport">è­·ç…§ï¼‹æ‰‹æ©Ÿï¼‹è¡Œå‹•é›»æº</label>
              <label><input type="checkbox" data-id="prep-emergency-cards">é›™å¡/æ—¥å¹£å‚™ç”¨</label>
              <label><input type="checkbox" data-id="prep-emergency-vjw">VJW QR åœ¨åœ°ç«¯</label>
              <label><input type="checkbox" data-id="prep-emergency-esim">eSIM å·²é–‹é€š</label>
            </div>
          </section>

          <p class="checklist-note">æ¯é …å‹¾é¸çµæœå„²å­˜åœ¨æœ¬æ©Ÿï¼Œé‡æ–°æ•´ç†ä»æœƒä¿ç•™ã€‚</p>
        </article>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const fabToggle = document.getElementById("fabToggle");
        const menuPanel = document.getElementById("floatingMenuPanel");
        const sosPanel = document.getElementById("floatingSos");
        const bearPanel = document.getElementById("floatingBear");
        const mapPanel = document.getElementById("floatingMap");
        const taxPanel = document.getElementById("floatingTax");
        const checkPanel = document.getElementById("floatingCheck");
        const checklistPanel = document.getElementById("floatingChecklist");
        const floatingPanels = [
          sosPanel,
          bearPanel,
          mapPanel,
          taxPanel,
          checkPanel,
          checklistPanel,
        ];

        const closeFloatingPanels = () => {
          floatingPanels.forEach((panel) => panel.classList.remove("is-open"));
        };

        const setMenuOpen = (isOpen) => {
          menuPanel.classList.toggle("is-open", isOpen);
          fabToggle.classList.toggle("is-open", isOpen);
          if (!isOpen) {
            closeFloatingPanels();
          }
        };

        fabToggle.addEventListener("click", function (e) {
          e.stopPropagation();
          const currentlyOpen = menuPanel.classList.contains("is-open");
          if (currentlyOpen) {
            setMenuOpen(false);
          } else {
            closeFloatingPanels();
            setMenuOpen(true);
          }
        });

        // é»é¸å„å€‹ menu item
        menuPanel.addEventListener("click", function (e) {
          const item = e.target.closest(".floating-menu-item");
          if (!item) return;
          e.preventDefault();

          const action = item.dataset.action;
          setMenuOpen(false); // é»äº†å°±å…ˆæ”¶èµ·ä¸»é¸å–®

          switch (action) {
            case "sos": {
              closeFloatingPanels();
              sosPanel.classList.toggle("is-open");
              break;
            }
            case "bear": {
              closeFloatingPanels();
              bearPanel.classList.toggle("is-open");
              break;
            }
            case "map": {
              closeFloatingPanels();
              mapPanel.classList.toggle("is-open");
              break;
            }
            case "tax": {
              closeFloatingPanels();
              taxPanel.classList.toggle("is-open");
              break;
            }
            case "check": {
              closeFloatingPanels();
              checkPanel.classList.toggle("is-open");
              break;
            }
            case "prep": {
              closeFloatingPanels();
              checklistPanel.classList.toggle("is-open");
              break;
            }
            case "top": {
              window.scrollTo({ top: 0, behavior: "smooth" });
              setMenuOpen(false);
              break;
            }
            default:
              break;
          }
        });

        // é—œé–‰å°é¢æ¿æŒ‰éˆ•
        document.querySelectorAll(".floating-panel-close").forEach((btn) => {
          btn.addEventListener("click", function () {
            const type = this.dataset.close;
            if (type === "sos") {
              sosPanel.classList.remove("is-open");
            } else if (type === "bear") {
              bearPanel.classList.remove("is-open");
            } else if (type === "map") {
              mapPanel.classList.remove("is-open");
            } else if (type === "tax") {
              taxPanel.classList.remove("is-open");
            } else if (type === "check") {
              checkPanel.classList.remove("is-open");
            } else if (type === "checklist") {
              checklistPanel.classList.remove("is-open");
            }
          });
        });

        // é»æ“Šé é¢å…¶ä»–åœ°æ–¹æ™‚ï¼Œé—œé–‰é¸å–®
        document.addEventListener("click", function (e) {
          const insideMenu =
            e.target.closest(".floating-menu") ||
            e.target.closest(".floating-panel");
          if (!insideMenu) {
            setMenuOpen(false);
          }
        });

        const checklistInputs = document.querySelectorAll(
          "#floatingChecklist input[type='checkbox'][data-id]"
        );
        checklistInputs.forEach((input) => {
          const storageKey = input.dataset.id;
          input.checked = localStorage.getItem(storageKey) === "true";
          input.addEventListener("change", function () {
            localStorage.setItem(storageKey, input.checked);
          });
        });

      });
    </script>
</body>
</html>
